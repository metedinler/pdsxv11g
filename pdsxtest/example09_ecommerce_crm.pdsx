REM √ñrnek 9: E-Ticaret Satƒ±≈ü Analizi ve CRM Sistemi
REM Bu program online satƒ±≈ülarƒ± takip eder, m√º≈üteri ili≈ükilerini y√∂netir ve raporlar olu≈üturur

PRINT "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
PRINT "‚ïë E-Tƒ∞CARET SATI≈û ANALƒ∞Zƒ∞ VE CRM      ‚ïë"
PRINT "‚ïë           pdsXv11g v1.0              ‚ïë"
PRINT "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
PRINT

REM Global veri yapƒ±larƒ±
DIM customers AS ARRAY
DIM products AS ARRAY
DIM orders AS ARRAY
DIM campaigns AS ARRAY
DIM analytics AS OBJECT
DIM inventory AS ARRAY

REM Sistem ba≈ülatma
call initialize_ecommerce_system()

DEF SUB initialize_ecommerce_system()
    REM √ñrnek m√º≈üteriler
    customers = [
        {"id": 1, "name": "Ahmet Yƒ±lmaz", "email": "ahmet@email.com", "phone": "0532-111-1111",
         "city": "ƒ∞stanbul", "registration_date": "2024-01-15", "total_orders": 5, "total_spent": 2150.0,
         "last_order_date": "2024-12-20", "status": "aktif", "segment": "VIP"},
        {"id": 2, "name": "Ay≈üe Kaya", "email": "ayse@email.com", "phone": "0533-222-2222",
         "city": "Ankara", "registration_date": "2024-02-10", "total_orders": 3, "total_spent": 890.0,
         "last_order_date": "2024-12-18", "status": "aktif", "segment": "d√ºzenli"},
        {"id": 3, "name": "Mehmet Demir", "email": "mehmet@email.com", "phone": "0534-333-3333",
         "city": "ƒ∞zmir", "registration_date": "2024-03-05", "total_orders": 1, "total_spent": 125.0,
         "last_order_date": "2024-11-15", "status": "pasif", "segment": "yeni"}
    ]
    
    REM √ñrnek √ºr√ºnler
    products = [
        {"id": 101, "name": "Laptop HP", "category": "Elektronik", "price": 8500.0, "cost": 6800.0,
         "stock": 15, "sales_count": 25, "rating": 4.5, "status": "aktif"},
        {"id": 102, "name": "Bluetooth Kulaklƒ±k", "category": "Elektronik", "price": 299.0, "cost": 180.0,
         "stock": 50, "sales_count": 120, "rating": 4.2, "status": "aktif"},
        {"id": 103, "name": "Spor Ayakkabƒ±", "category": "Spor", "price": 450.0, "cost": 270.0,
         "stock": 30, "sales_count": 85, "rating": 4.8, "status": "aktif"},
        {"id": 104, "name": "Kahve Makinesi", "category": "Ev E≈üyasƒ±", "price": 1250.0, "cost": 900.0,
         "stock": 8, "sales_count": 12, "rating": 4.3, "status": "aktif"}
    ]
    
    REM √ñrnek sipari≈üler
    orders = [
        {"id": 1001, "customer_id": 1, "date": "2024-12-20", "status": "teslim edildi",
         "items": [{"product_id": 101, "quantity": 1, "price": 8500.0}],
         "subtotal": 8500.0, "shipping": 50.0, "tax": 1530.0, "total": 10080.0,
         "payment_method": "kredi kartƒ±", "shipping_address": "ƒ∞stanbul"},
        {"id": 1002, "customer_id": 2, "date": "2024-12-18", "status": "kargoda",
         "items": [{"product_id": 102, "quantity": 2, "price": 299.0}, {"product_id": 103, "quantity": 1, "price": 450.0}],
         "subtotal": 1048.0, "shipping": 30.0, "tax": 188.64, "total": 1266.64,
         "payment_method": "havale", "shipping_address": "Ankara"}
    ]
    
    REM Kampanyalar
    campaigns = [
        {"id": 201, "name": "Kƒ±≈ü ƒ∞ndirimi", "type": "y√ºzde", "discount": 20, "min_amount": 500,
         "start_date": "2024-12-01", "end_date": "2024-12-31", "usage_count": 45, "status": "aktif"},
        {"id": 202, "name": "√úcretsiz Kargo", "type": "kargo", "discount": 0, "min_amount": 200,
         "start_date": "2024-12-15", "end_date": "2025-01-15", "usage_count": 78, "status": "aktif"}
    ]
    
    REM Analitik veriler ba≈ülangƒ±√ß deƒüerleri
    analytics.total_revenue = 0
    analytics.total_orders = 0
    analytics.conversion_rate = 0
    analytics.avg_order_value = 0
END SUB

DEF SUB show_main_menu()
    PRINT "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
    PRINT "1. M√º≈üteri Y√∂netimi (CRM)"
    PRINT "2. Sipari≈ü Y√∂netimi"
    PRINT "3. √úr√ºn Y√∂netimi"
    PRINT "4. Satƒ±≈ü Analizi"
    PRINT "5. Kampanya Y√∂netimi"
    PRINT "6. Raporlar ve Dashboard"
    PRINT "7. M√º≈üteri Segmentasyonu"
    PRINT "8. Tahmin ve Projeksiyonlar"
    PRINT "9. Performans Metrikleri"
    PRINT "10. √áƒ±kƒ±≈ü"
    PRINT "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
END SUB

DEF SUB customer_management()
    DIM running AS BOOLEAN
    running = True
    
    WHILE running
        PRINT
        PRINT "‚ïê‚ïê‚ïê M√ú≈ûTERƒ∞ Y√ñNETƒ∞Mƒ∞ (CRM) ‚ïê‚ïê‚ïê"
        PRINT "1. M√º≈üteri Listesi"
        PRINT "2. Yeni M√º≈üteri Ekle"
        PRINT "3. M√º≈üteri Detaylarƒ±"
        PRINT "4. M√º≈üteri G√ºncelle"
        PRINT "5. M√º≈üteri Arama"
        PRINT "6. M√º≈üteri Segmentleri"
        PRINT "7. ƒ∞leti≈üim Ge√ßmi≈üi"
        PRINT "8. Ana Men√ºye D√∂n"
        
        INPUT "Se√ßiminiz: ", choice
        
        SELECT CASE choice
            CASE 1: call list_customers()
            CASE 2: call add_customer()
            CASE 3: call customer_details()
            CASE 4: call update_customer()
            CASE 5: call search_customers()
            CASE 6: call customer_segments()
            CASE 7: PRINT "ƒ∞leti≈üim ge√ßmi≈üi mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
            CASE 8: running = False
        END SELECT
    WEND
END SUB

DEF SUB list_customers()
    PRINT
    PRINT "M√ú≈ûTERƒ∞ Lƒ∞STESƒ∞:"
    PRINT STRING$(120, "=")
    PRINT "ID  | Ad Soyad        | E-mail             | ≈ûehir    | Sipari≈ü | Toplam    | Son Sipari≈ü | Segment"
    PRINT STRING$(120, "-")
    
    FOR i = 0 TO LEN(customers) - 1
        DIM c AS OBJECT
        c = customers(i)
        
        PRINT RIGHT$("   " + STR$(c.id), 3) + " | " +
              LEFT$(c.name + STRING$(15, " "), 15) + " | " +
              LEFT$(c.email + STRING$(18, " "), 18) + " | " +
              LEFT$(c.city + STRING$(8, " "), 8) + " | " +
              RIGHT$("      " + STR$(c.total_orders), 7) + " | " +
              RIGHT$("        " + STR$(c.total_spent), 9) + " | " +
              c.last_order_date + " | " +
              c.segment
    NEXT i
    
    PRINT STRING$(120, "=")
    PRINT "Toplam m√º≈üteri sayƒ±sƒ±: " + STR$(LEN(customers))
END SUB

DEF SUB add_customer()
    PRINT
    PRINT "YENƒ∞ M√ú≈ûTERƒ∞ EKLEME:"
    
    DIM new_customer AS OBJECT
    DIM max_id AS INTEGER
    max_id = 0
    
    FOR i = 0 TO LEN(customers) - 1
        IF customers(i).id > max_id THEN max_id = customers(i).id
    NEXT i
    
    new_customer.id = max_id + 1
    
    INPUT "Ad Soyad: ", new_customer.name
    INPUT "E-mail: ", new_customer.email
    INPUT "Telefon: ", new_customer.phone
    INPUT "≈ûehir: ", new_customer.city
    
    new_customer.registration_date = FORMAT$(NOW(), "yyyy-mm-dd")
    new_customer.total_orders = 0
    new_customer.total_spent = 0.0
    new_customer.last_order_date = ""
    new_customer.status = "aktif"
    new_customer.segment = "yeni"
    
    INSERT(customers, new_customer)
    
    PRINT "Yeni m√º≈üteri eklendi! ID: " + STR$(new_customer.id)
END SUB

DEF SUB customer_details()
    INPUT "M√º≈üteri ID: ", customer_id
    
    DIM customer_index AS INTEGER
    customer_index = find_customer_by_id(customer_id)
    
    IF customer_index = -1 THEN
        PRINT "M√º≈üteri bulunamadƒ±!"
        EXIT SUB
    END IF
    
    DIM c AS OBJECT
    c = customers(customer_index)
    
    PRINT
    PRINT "‚ïê‚ïê‚ïê M√ú≈ûTERƒ∞ DETAYLARI ‚ïê‚ïê‚ïê"
    PRINT "ID: " + STR$(c.id)
    PRINT "Ad Soyad: " + c.name
    PRINT "E-mail: " + c.email
    PRINT "Telefon: " + c.phone
    PRINT "≈ûehir: " + c.city
    PRINT "Kayƒ±t Tarihi: " + c.registration_date
    PRINT "Durum: " + c.status
    PRINT "Segment: " + c.segment
    PRINT
    PRINT "Sƒ∞PARƒ∞≈û ƒ∞STATƒ∞STƒ∞KLERƒ∞:"
    PRINT "Toplam sipari≈ü: " + STR$(c.total_orders)
    PRINT "Toplam harcama: " + STR$(c.total_spent) + " ‚Ç∫"
    IF c.total_orders > 0 THEN
        PRINT "Ortalama sipari≈ü tutarƒ±: " + STR$(ROUND(c.total_spent / c.total_orders, 2)) + " ‚Ç∫"
    END IF
    PRINT "Son sipari≈ü: " + c.last_order_date
    
    REM M√º≈üteriye ait sipari≈üleri listele
    PRINT
    PRINT "Sƒ∞PARƒ∞≈û GE√áMƒ∞≈ûƒ∞:"
    DIM found_orders AS BOOLEAN
    found_orders = False
    
    FOR i = 0 TO LEN(orders) - 1
        IF orders(i).customer_id = customer_id THEN
            found_orders = True
            PRINT "Sipari≈ü #" + STR$(orders(i).id) + " - " + orders(i).date + 
                  " - " + STR$(orders(i).total) + " ‚Ç∫ - " + orders(i).status
        END IF
    NEXT i
    
    IF NOT found_orders THEN
        PRINT "Hen√ºz sipari≈ü bulunmuyor."
    END IF
END SUB

DEF FUNCTION find_customer_by_id(id AS INTEGER) AS INTEGER
    FOR i = 0 TO LEN(customers) - 1
        IF customers(i).id = id THEN
            RETURN i
        END IF
    NEXT i
    RETURN -1
END FUNCTION

DEF SUB order_management()
    DIM running AS BOOLEAN
    running = True
    
    WHILE running
        PRINT
        PRINT "‚ïê‚ïê‚ïê Sƒ∞PARƒ∞≈û Y√ñNETƒ∞Mƒ∞ ‚ïê‚ïê‚ïê"
        PRINT "1. Sipari≈ü Listesi"
        PRINT "2. Yeni Sipari≈ü Olu≈ütur"
        PRINT "3. Sipari≈ü Detaylarƒ±"
        PRINT "4. Sipari≈ü Durumu G√ºncelle"
        PRINT "5. Sipari≈ü Arama"
        PRINT "6. Bekleyen Sipari≈üler"
        PRINT "7. Ana Men√ºye D√∂n"
        
        INPUT "Se√ßiminiz: ", choice
        
        SELECT CASE choice
            CASE 1: call list_orders()
            CASE 2: call create_order()
            CASE 3: call order_details()
            CASE 4: call update_order_status()
            CASE 5: call search_orders()
            CASE 6: call pending_orders()
            CASE 7: running = False
        END SELECT
    WEND
END SUB

DEF SUB list_orders()
    PRINT
    PRINT "Sƒ∞PARƒ∞≈û Lƒ∞STESƒ∞:"
    PRINT STRING$(100, "=")
    PRINT "Sipari≈ü ID | M√º≈üteri ID | Tarih      | Durum          | Toplam"
    PRINT STRING$(100, "-")
    
    FOR i = 0 TO LEN(orders) - 1
        DIM o AS OBJECT
        o = orders(i)
        
        PRINT RIGHT$("         " + STR$(o.id), 10) + " | " +
              RIGHT$("         " + STR$(o.customer_id), 10) + " | " +
              o.date + " | " +
              LEFT$(o.status + STRING$(14, " "), 14) + " | " +
              RIGHT$("       " + STR$(o.total), 8) + " ‚Ç∫"
    NEXT i
    
    PRINT STRING$(100, "=")
    PRINT "Toplam sipari≈ü sayƒ±sƒ±: " + STR$(LEN(orders))
END SUB

DEF SUB create_order()
    PRINT
    PRINT "YENƒ∞ Sƒ∞PARƒ∞≈û OLU≈ûTUR:"
    
    DIM new_order AS OBJECT
    DIM max_id AS INTEGER
    max_id = 1000
    
    FOR i = 0 TO LEN(orders) - 1
        IF orders(i).id > max_id THEN max_id = orders(i).id
    NEXT i
    
    new_order.id = max_id + 1
    
    INPUT "M√º≈üteri ID: ", new_order.customer_id
    
    REM M√º≈üteriyi kontrol et
    IF find_customer_by_id(new_order.customer_id) = -1 THEN
        PRINT "M√º≈üteri bulunamadƒ±!"
        EXIT SUB
    END IF
    
    new_order.date = FORMAT$(NOW(), "yyyy-mm-dd")
    new_order.status = "yeni"
    new_order.payment_method = "kredi kartƒ±"
    new_order.shipping_address = ""
    new_order.items = []
    new_order.subtotal = 0.0
    new_order.shipping = 30.0  ' Varsayƒ±lan kargo √ºcreti
    new_order.tax = 0.0
    new_order.total = 0.0
    
    PRINT
    PRINT "√úr√ºn ekleme (√ßƒ±kmak i√ßin 0):"
    
    DIM continue_adding AS BOOLEAN
    continue_adding = True
    
    WHILE continue_adding
        PRINT
        PRINT "Mevcut √ºr√ºnler:"
        FOR j = 0 TO LEN(products) - 1
            PRINT STR$(products(j).id) + ". " + products(j).name + " - " + STR$(products(j).price) + " ‚Ç∫"
        NEXT j
        
        INPUT "√úr√ºn ID (0 = bitir): ", product_id
        
        IF product_id = 0 THEN
            continue_adding = False
        ELSE
            DIM product_found AS BOOLEAN
            product_found = False
            
            FOR k = 0 TO LEN(products) - 1
                IF products(k).id = product_id THEN
                    product_found = True
                    
                    INPUT "Miktar: ", quantity
                    
                    DIM item AS OBJECT
                    item.product_id = product_id
                    item.quantity = quantity
                    item.price = products(k).price
                    
                    INSERT(new_order.items, item)
                    new_order.subtotal = new_order.subtotal + (quantity * products(k).price)
                    
                    PRINT "√úr√ºn eklendi: " + products(k).name + " x" + STR$(quantity)
                    EXIT FOR
                END IF
            NEXT k
            
            IF NOT product_found THEN
                PRINT "√úr√ºn bulunamadƒ±!"
            END IF
        END IF
    WEND
    
    IF LEN(new_order.items) = 0 THEN
        PRINT "Sipari≈ü iptal edildi - √ºr√ºn eklenmedi."
        EXIT SUB
    END IF
    
    REM Vergi hesapla (%18 KDV)
    new_order.tax = new_order.subtotal * 0.18
    
    REM Toplam hesapla
    new_order.total = new_order.subtotal + new_order.shipping + new_order.tax
    
    INPUT "Teslimat adresi: ", new_order.shipping_address
    
    INSERT(orders, new_order)
    
    PRINT
    PRINT "Sipari≈ü olu≈üturuldu!"
    PRINT "Sipari≈ü ID: " + STR$(new_order.id)
    PRINT "Ara toplam: " + STR$(new_order.subtotal) + " ‚Ç∫"
    PRINT "Kargo: " + STR$(new_order.shipping) + " ‚Ç∫"
    PRINT "Vergi: " + STR$(ROUND(new_order.tax, 2)) + " ‚Ç∫"
    PRINT "TOPLAM: " + STR$(ROUND(new_order.total, 2)) + " ‚Ç∫"
    
    REM M√º≈üteri bilgilerini g√ºncelle
    call update_customer_stats(new_order.customer_id, new_order.total)
END SUB

DEF SUB update_customer_stats(customer_id AS INTEGER, order_total AS DOUBLE)
    DIM customer_index AS INTEGER
    customer_index = find_customer_by_id(customer_id)
    
    IF customer_index >= 0 THEN
        customers(customer_index).total_orders = customers(customer_index).total_orders + 1
        customers(customer_index).total_spent = customers(customer_index).total_spent + order_total
        customers(customer_index).last_order_date = FORMAT$(NOW(), "yyyy-mm-dd")
        
        REM Segment g√ºncelle
        IF customers(customer_index).total_spent >= 2000 THEN
            customers(customer_index).segment = "VIP"
        ELSEIF customers(customer_index).total_orders >= 3 THEN
            customers(customer_index).segment = "d√ºzenli"
        END IF
    END IF
END SUB

DEF SUB sales_analysis()
    DIM running AS BOOLEAN
    running = True
    
    WHILE running
        PRINT
        PRINT "‚ïê‚ïê‚ïê SATI≈û ANALƒ∞Zƒ∞ ‚ïê‚ïê‚ïê"
        PRINT "1. G√ºnl√ºk/Haftalƒ±k/Aylƒ±k Satƒ±≈ülar"
        PRINT "2. En √áok Satan √úr√ºnler"
        PRINT "3. M√º≈üteri Analizi"
        PRINT "4. Kategori Analizi"
        PRINT "5. Karlƒ±lƒ±k Analizi"
        PRINT "6. Coƒürafi Analiz"
        PRINT "7. Trend Analizi"
        PRINT "8. Ana Men√ºye D√∂n"
        
        INPUT "Se√ßiminiz: ", choice
        
        SELECT CASE choice
            CASE 1: call time_based_sales()
            CASE 2: call top_selling_products()
            CASE 3: call customer_analysis()
            CASE 4: call category_analysis()
            CASE 5: call profitability_analysis()
            CASE 6: call geographical_analysis()
            CASE 7: call trend_analysis()
            CASE 8: running = False
        END SELECT
    WEND
END SUB

DEF SUB top_selling_products()
    PRINT
    PRINT "EN √áOK SATAN √úR√úNLER:"
    PRINT STRING$(80, "=")
    
    REM √úr√ºnleri satƒ±≈ü sayƒ±sƒ±na g√∂re sƒ±rala (basit bubble sort)
    DIM sorted_products AS ARRAY
    sorted_products = products  ' Kopya olu≈ütur
    
    FOR i = 0 TO LEN(sorted_products) - 2
        FOR j = 0 TO LEN(sorted_products) - 2 - i
            IF sorted_products(j).sales_count < sorted_products(j + 1).sales_count THEN
                DIM temp AS OBJECT
                temp = sorted_products(j)
                sorted_products(j) = sorted_products(j + 1)
                sorted_products(j + 1) = temp
            END IF
        NEXT j
    NEXT i
    
    PRINT "Sƒ±ra | √úr√ºn Adƒ±           | Kategori   | Satƒ±≈ü | Stok | Gelir"
    PRINT STRING$(80, "-")
    
    FOR i = 0 TO LEN(sorted_products) - 1
        DIM p AS OBJECT
        p = sorted_products(i)
        
        DIM revenue AS DOUBLE
        revenue = p.sales_count * p.price
        
        PRINT RIGHT$("   " + STR$(i + 1), 4) + " | " +
              LEFT$(p.name + STRING$(18, " "), 18) + " | " +
              LEFT$(p.category + STRING$(10, " "), 10) + " | " +
              RIGHT$("    " + STR$(p.sales_count), 5) + " | " +
              RIGHT$("   " + STR$(p.stock), 4) + " | " +
              RIGHT$("       " + STR$(revenue), 8)
    NEXT i
    
    PRINT STRING$(80, "=")
END SUB

DEF SUB customer_analysis()
    PRINT
    PRINT "M√ú≈ûTERƒ∞ ANALƒ∞Zƒ∞:"
    PRINT STRING$(70, "=")
    
    DIM total_customers AS INTEGER
    DIM active_customers AS INTEGER
    DIM vip_customers AS INTEGER
    DIM total_revenue AS DOUBLE
    
    total_customers = LEN(customers)
    active_customers = 0
    vip_customers = 0
    total_revenue = 0
    
    FOR i = 0 TO LEN(customers) - 1
        DIM c AS OBJECT
        c = customers(i)
        
        total_revenue = total_revenue + c.total_spent
        
        IF c.status = "aktif" THEN
            active_customers = active_customers + 1
        END IF
        
        IF c.segment = "VIP" THEN
            vip_customers = vip_customers + 1
        END IF
    NEXT i
    
    PRINT "GENEL ƒ∞STATƒ∞STƒ∞KLER:"
    PRINT "Toplam m√º≈üteri: " + STR$(total_customers)
    PRINT "Aktif m√º≈üteri: " + STR$(active_customers)
    PRINT "VIP m√º≈üteri: " + STR$(vip_customers)
    PRINT "Toplam gelir: " + STR$(ROUND(total_revenue, 2)) + " ‚Ç∫"
    IF total_customers > 0 THEN
        PRINT "M√º≈üteri ba≈üƒ±na ortalama gelir: " + STR$(ROUND(total_revenue / total_customers, 2)) + " ‚Ç∫"
    END IF
    
    PRINT
    PRINT "SEGMENT DAƒûILIMI:"
    DIM yeni_count, duzenli_count AS INTEGER
    yeni_count = 0
    duzenli_count = 0
    
    FOR i = 0 TO LEN(customers) - 1
        SELECT CASE customers(i).segment
            CASE "yeni": yeni_count = yeni_count + 1
            CASE "d√ºzenli": duzenli_count = duzenli_count + 1
        END SELECT
    NEXT i
    
    PRINT "Yeni m√º≈üteri: " + STR$(yeni_count) + " (%" + STR$(ROUND((yeni_count / total_customers) * 100, 1)) + ")"
    PRINT "D√ºzenli m√º≈üteri: " + STR$(duzenli_count) + " (%" + STR$(ROUND((duzenli_count / total_customers) * 100, 1)) + ")"
    PRINT "VIP m√º≈üteri: " + STR$(vip_customers) + " (%" + STR$(ROUND((vip_customers / total_customers) * 100, 1)) + ")"
    
    PRINT
    PRINT "EN DEƒûERLƒ∞ M√ú≈ûTERƒ∞LER:"
    PRINT "Sƒ±ra | M√º≈üteri Adƒ±      | Toplam Harcama | Sipari≈ü Sayƒ±sƒ±"
    PRINT STRING$(60, "-")
    
    REM M√º≈üterileri harcamaya g√∂re sƒ±rala
    DIM sorted_customers AS ARRAY
    sorted_customers = customers
    
    FOR i = 0 TO LEN(sorted_customers) - 2
        FOR j = 0 TO LEN(sorted_customers) - 2 - i
            IF sorted_customers(j).total_spent < sorted_customers(j + 1).total_spent THEN
                DIM temp AS OBJECT
                temp = sorted_customers(j)
                sorted_customers(j) = sorted_customers(j + 1)
                sorted_customers(j + 1) = temp
            END IF
        NEXT j
    NEXT i
    
    DIM show_count AS INTEGER
    show_count = MIN(5, LEN(sorted_customers))
    
    FOR i = 0 TO show_count - 1
        DIM c AS OBJECT
        c = sorted_customers(i)
        
        PRINT RIGHT$("   " + STR$(i + 1), 4) + " | " +
              LEFT$(c.name + STRING$(16, " "), 16) + " | " +
              RIGHT$("             " + STR$(c.total_spent), 14) + " | " +
              RIGHT$("            " + STR$(c.total_orders), 13)
    NEXT i
END SUB

DEF SUB profitability_analysis()
    PRINT
    PRINT "KARLILIK ANALƒ∞Zƒ∞:"
    PRINT STRING$(70, "=")
    
    DIM total_revenue AS DOUBLE
    DIM total_cost AS DOUBLE
    DIM total_profit AS DOUBLE
    
    total_revenue = 0
    total_cost = 0
    
    PRINT "√úr√ºn           | Satƒ±≈ü | Gelir    | Maliyet  | Kar      | Kar Marjƒ±"
    PRINT STRING$(70, "-")
    
    FOR i = 0 TO LEN(products) - 1
        DIM p AS OBJECT
        p = products(i)
        
        DIM product_revenue AS DOUBLE
        DIM product_cost AS DOUBLE
        DIM product_profit AS DOUBLE
        DIM profit_margin AS DOUBLE
        
        product_revenue = p.sales_count * p.price
        product_cost = p.sales_count * p.cost
        product_profit = product_revenue - product_cost
        
        IF product_revenue > 0 THEN
            profit_margin = (product_profit / product_revenue) * 100
        ELSE
            profit_margin = 0
        END IF
        
        total_revenue = total_revenue + product_revenue
        total_cost = total_cost + product_cost
        
        PRINT LEFT$(p.name + STRING$(14, " "), 14) + " | " +
              RIGHT$("    " + STR$(p.sales_count), 5) + " | " +
              RIGHT$("       " + STR$(ROUND(product_revenue, 0)), 8) + " | " +
              RIGHT$("       " + STR$(ROUND(product_cost, 0)), 8) + " | " +
              RIGHT$("       " + STR$(ROUND(product_profit, 0)), 8) + " | " +
              RIGHT$("      " + STR$(ROUND(profit_margin, 1)), 7) + "%"
    NEXT i
    
    total_profit = total_revenue - total_cost
    
    PRINT STRING$(70, "=")
    PRINT "TOPLAM √ñZET:"
    PRINT "Toplam gelir: " + STR$(ROUND(total_revenue, 2)) + " ‚Ç∫"
    PRINT "Toplam maliyet: " + STR$(ROUND(total_cost, 2)) + " ‚Ç∫"
    PRINT "Toplam kar: " + STR$(ROUND(total_profit, 2)) + " ‚Ç∫"
    
    IF total_revenue > 0 THEN
        DIM overall_margin AS DOUBLE
        overall_margin = (total_profit / total_revenue) * 100
        PRINT "Genel kar marjƒ±: %" + STR$(ROUND(overall_margin, 2))
    END IF
END SUB

DEF SUB dashboard_reports()
    PRINT
    PRINT "‚ïê‚ïê‚ïê DASHBOARD VE RAPORLAR ‚ïê‚ïê‚ïê"
    
    REM Temel metrikleri hesapla
    call calculate_kpis()
    
    PRINT "ANA PERFORMANS G√ñSTERGELERƒ∞ (KPI):"
    PRINT STRING$(60, "=")
    
    DIM total_revenue AS DOUBLE
    DIM total_orders AS INTEGER
    DIM avg_order_value AS DOUBLE
    DIM active_customers AS INTEGER
    
    total_revenue = 0
    total_orders = LEN(orders)
    active_customers = 0
    
    FOR i = 0 TO LEN(orders) - 1
        total_revenue = total_revenue + orders(i).total
    NEXT i
    
    IF total_orders > 0 THEN
        avg_order_value = total_revenue / total_orders
    ELSE
        avg_order_value = 0
    END IF
    
    FOR i = 0 TO LEN(customers) - 1
        IF customers(i).status = "aktif" THEN
            active_customers = active_customers + 1
        END IF
    NEXT i
    
    PRINT "üìä Toplam gelir: " + STR$(ROUND(total_revenue, 2)) + " ‚Ç∫"
    PRINT "üõí Toplam sipari≈ü: " + STR$(total_orders)
    PRINT "üí∞ Ortalama sipari≈ü deƒüeri: " + STR$(ROUND(avg_order_value, 2)) + " ‚Ç∫"
    PRINT "üë• Aktif m√º≈üteri sayƒ±sƒ±: " + STR$(active_customers)
    PRINT "üìà M√º≈üteri ba≈üƒ±na gelir: " + STR$(ROUND(total_revenue / active_customers, 2)) + " ‚Ç∫"
    
    PRINT
    PRINT "BU AY PERFORMANCE:"
    PRINT "üî• En √ßok satan √ºr√ºn: " + products(0).name
    PRINT "‚≠ê En deƒüerli m√º≈üteri: " + customers(0).name
    PRINT "üìç En √ßok sipari≈ü alan ≈üehir: ƒ∞stanbul"
    
    PRINT
    PRINT "UYARILAR:"
    
    REM D√º≈ü√ºk stoklu √ºr√ºnleri kontrol et
    DIM low_stock_count AS INTEGER
    low_stock_count = 0
    
    FOR i = 0 TO LEN(products) - 1
        IF products(i).stock <= 10 THEN
            low_stock_count = low_stock_count + 1
        END IF
    NEXT i
    
    IF low_stock_count > 0 THEN
        PRINT "‚ö†Ô∏è  " + STR$(low_stock_count) + " √ºr√ºn d√º≈ü√ºk stokta!"
    END IF
    
    REM Pasif m√º≈üteri kontrol√º
    DIM inactive_customers AS INTEGER
    inactive_customers = LEN(customers) - active_customers
    
    IF inactive_customers > 0 THEN
        PRINT "üì± " + STR$(inactive_customers) + " pasif m√º≈üteriyle ileti≈üime ge√ßin"
    END IF
    
    PRINT
    PRINT "√ñNERILER:"
    PRINT "üí° VIP m√º≈üteriler i√ßin √∂zel kampanya d√ºzenleyin"
    PRINT "üí° D√º≈ü√ºk stoklu √ºr√ºnler i√ßin acil tedarik planƒ± yapƒ±n"
    PRINT "üí° Pasif m√º≈üteriler i√ßin geri kazanƒ±m kampanyasƒ± ba≈ülatƒ±n"
END SUB

DEF SUB calculate_kpis()
    REM Bu fonksiyon KPI hesaplamalarƒ±nƒ± yapar
    analytics.total_revenue = 0
    analytics.total_orders = LEN(orders)
    
    FOR i = 0 TO LEN(orders) - 1
        analytics.total_revenue = analytics.total_revenue + orders(i).total
    NEXT i
    
    IF analytics.total_orders > 0 THEN
        analytics.avg_order_value = analytics.total_revenue / analytics.total_orders
    ELSE
        analytics.avg_order_value = 0
    END IF
    
    REM Conversion rate basit hesaplama (varsayƒ±msal)
    analytics.conversion_rate = 2.5  ' %2.5 varsayƒ±msal oran
END SUB

DEF SUB campaign_management()
    PRINT
    PRINT "‚ïê‚ïê‚ïê KAMPANYA Y√ñNETƒ∞Mƒ∞ ‚ïê‚ïê‚ïê"
    PRINT "1. Aktif Kampanyalar"
    PRINT "2. Yeni Kampanya Olu≈ütur"
    PRINT "3. Kampanya Performansƒ±"
    PRINT "4. Kampanya Ge√ßmi≈üi"
    
    INPUT "Se√ßiminiz: ", choice
    
    SELECT CASE choice
        CASE 1: call list_campaigns()
        CASE 2: call create_campaign()
        CASE 3: call campaign_performance()
        CASE 4: PRINT "Kampanya ge√ßmi≈üi mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
    END SELECT
END SUB

DEF SUB list_campaigns()
    PRINT
    PRINT "AKTƒ∞F KAMPANYALAR:"
    PRINT STRING$(80, "=")
    
    FOR i = 0 TO LEN(campaigns) - 1
        DIM camp AS OBJECT
        camp = campaigns(i)
        
        IF camp.status = "aktif" THEN
            PRINT "ID: " + STR$(camp.id) + " | " + camp.name
            PRINT "T√ºr: " + camp.type + " | ƒ∞ndirim: %" + STR$(camp.discount)
            PRINT "Minimum tutar: " + STR$(camp.min_amount) + " ‚Ç∫"
            PRINT "Tarih: " + camp.start_date + " - " + camp.end_date
            PRINT "Kullanƒ±m: " + STR$(camp.usage_count) + " kez"
            PRINT STRING$(40, "-")
        END IF
    NEXT i
END SUB

REM Ana program d√∂ng√ºs√º
DIM running AS BOOLEAN
running = True

WHILE running
    show_main_menu()
    
    DIM choice AS INTEGER
    INPUT "Se√ßiminiz (1-10): ", choice
    
    SELECT CASE choice
        CASE 1
            customer_management()
        CASE 2
            order_management()
        CASE 3
            PRINT "√úr√ºn y√∂netimi mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 4
            sales_analysis()
        CASE 5
            campaign_management()
        CASE 6
            dashboard_reports()
        CASE 7
            PRINT "M√º≈üteri segmentasyonu mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 8
            PRINT "Tahmin ve projeksiyon mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 9
            PRINT "Performans metrikleri mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 10
            running = False
            PRINT "E-ticaret CRM sistemi kapatƒ±lƒ±yor..."
        CASE ELSE
            PRINT "Ge√ßersiz se√ßim!"
    END SELECT
    
    IF running THEN
        PRINT
        INPUT "Devam etmek i√ßin Enter tu≈üuna basƒ±n...", dummy
        PRINT
    END IF
WEND

PRINT "E-ticaret sistemi kapatƒ±ldƒ±."
