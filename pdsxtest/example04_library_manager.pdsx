REM Ã–rnek 4: KiÅŸisel KÃ¼tÃ¼phane YÃ¶netimi
REM Bu program kitap koleksiyonunu yÃ¶netir ve okuma takibi yapar

PRINT "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
PRINT "â•‘      KÄ°ÅžÄ°SEL KÃœTÃœPHANE YÃ–NETÄ°MÄ°      â•‘"
PRINT "â•‘           pdsXv11g v1.0              â•‘"
PRINT "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
PRINT

REM Kitap durumu sabitleri
LET STATUS_UNREAD = 1
LET STATUS_READING = 2
LET STATUS_COMPLETED = 3
LET STATUS_PAUSED = 4

REM Kitap veri yapÄ±sÄ±
TYPE Book
    id AS INTEGER
    title AS STRING
    author AS STRING
    genre AS STRING
    pages AS INTEGER
    status AS INTEGER
    rating AS INTEGER
    notes AS STRING
    start_date AS STRING
    finish_date AS STRING
END TYPE

REM Ana veri yapÄ±larÄ±
DIM books AS LIST
DIM genres AS LIST
books = []
genres = ["Roman", "Bilim Kurgu", "Fantastik", "Polisiye", "Tarih", "Biyografi", 
         "Felsefe", "Bilim", "Sanat", "KiÅŸisel GeliÅŸim", "Åžiir", "DiÄŸer"]

REM ID sayacÄ±
DIM next_book_id AS INTEGER
next_book_id = 1

DEF FUNCTION get_status_text(status_code)
    SELECT CASE status_code
        CASE STATUS_UNREAD
            RETURN "OkunmadÄ±"
        CASE STATUS_READING
            RETURN "Okunuyor"
        CASE STATUS_COMPLETED
            RETURN "TamamlandÄ±"
        CASE STATUS_PAUSED
            RETURN "DuraklatÄ±ldÄ±"
        CASE ELSE
            RETURN "Bilinmiyor"
    END SELECT
END FUNCTION

DEF SUB show_main_menu()
    PRINT "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    PRINT "1. Kitap Ekle"
    PRINT "2. Kitap Listesi"
    PRINT "3. Kitap Ara"
    PRINT "4. Okuma Durumu GÃ¼ncelle"
    PRINT "5. Kitap DeÄŸerlendir"
    PRINT "6. Ä°statistikler"
    PRINT "7. Kategori Analizi"
    PRINT "8. Okuma Hedefleri"
    PRINT "9. Kitap Sil"
    PRINT "10. Ã‡Ä±kÄ±ÅŸ"
    PRINT "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
END SUB

DEF SUB show_genres()
    PRINT "Mevcut Kategoriler:"
    FOR i = 0 TO LEN(genres) - 1
        PRINT STR$(i + 1) + ". " + genres(i)
    NEXT i
END SUB

DEF SUB add_book()
    DIM new_book AS Book
    DIM title AS STRING
    DIM author AS STRING
    DIM pages AS INTEGER
    DIM genre_choice AS INTEGER
    
    new_book.id = next_book_id
    next_book_id = next_book_id + 1
    
    INPUT "Kitap baÅŸlÄ±ÄŸÄ±: ", title
    new_book.title = title
    
    INPUT "Yazar: ", author
    new_book.author = author
    
    show_genres()
    INPUT "Kategori seÃ§in (1-" + STR$(LEN(genres)) + "): ", genre_choice
    
    IF genre_choice >= 1 AND genre_choice <= LEN(genres) THEN
        new_book.genre = genres(genre_choice - 1)
    ELSE
        PRINT "GeÃ§ersiz kategori! 'DiÄŸer' olarak ayarlandÄ±."
        new_book.genre = "DiÄŸer"
    END IF
    
    INPUT "Sayfa sayÄ±sÄ±: ", pages
    IF pages <= 0 THEN
        pages = 1
    END IF
    new_book.pages = pages
    
    new_book.status = STATUS_UNREAD
    new_book.rating = 0
    new_book.notes = ""
    new_book.start_date = ""
    new_book.finish_date = ""
    
    INSERT(books, new_book)
    PRINT "Kitap baÅŸarÄ±yla eklendi. ID: " + STR$(new_book.id)
END SUB

DEF SUB list_books()
    IF LEN(books) = 0 THEN
        PRINT "KÃ¼tÃ¼phanede henÃ¼z kitap yok."
        RETURN
    END IF
    
    PRINT "â•”â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•—"
    PRINT "â•‘ ID â”‚           BaÅŸlÄ±k             â”‚      Yazar       â”‚ Kategori  â”‚  Durum   â•‘"
    PRINT "â• â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•£"
    
    FOR i = 0 TO LEN(books) - 1
        DIM title_short AS STRING
        DIM author_short AS STRING
        DIM genre_short AS STRING
        DIM status_text AS STRING
        
        title_short = LEFT$(books(i).title + SPACE$(30), 30)
        author_short = LEFT$(books(i).author + SPACE$(18), 18)
        genre_short = LEFT$(books(i).genre + SPACE$(11), 11)
        status_text = get_status_text(books(i).status)
        
        PRINT "â•‘" + STR$(books(i).id) + "   â”‚" + title_short + "â”‚" + 
              author_short + "â”‚" + genre_short + "â”‚" + status_text + "  â•‘"
    NEXT i
    
    PRINT "â•šâ•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•"
    
    PRINT
    PRINT "Toplam " + STR$(LEN(books)) + " kitap kayÄ±tlÄ±."
END SUB

DEF SUB search_books()
    IF LEN(books) = 0 THEN
        PRINT "KÃ¼tÃ¼phanede henÃ¼z kitap yok."
        RETURN
    END IF
    
    PRINT "Arama tÃ¼rÃ¼:"
    PRINT "1. BaÅŸlÄ±ÄŸa gÃ¶re  2. Yazara gÃ¶re  3. Kategoriye gÃ¶re"
    
    DIM search_type AS INTEGER
    DIM search_term AS STRING
    
    INPUT "SeÃ§iminiz: ", search_type
    INPUT "Arama terimi: ", search_term
    search_term = UCASE$(search_term)
    
    DIM found_count AS INTEGER
    found_count = 0
    
    PRINT "â•â•â• ARAMA SONUÃ‡LARI â•â•â•"
    
    FOR i = 0 TO LEN(books) - 1
        DIM match AS BOOLEAN
        match = False
        
        SELECT CASE search_type
            CASE 1
                match = INSTR(1, UCASE$(books(i).title), search_term) > 0
            CASE 2
                match = INSTR(1, UCASE$(books(i).author), search_term) > 0
            CASE 3
                match = INSTR(1, UCASE$(books(i).genre), search_term) > 0
            CASE ELSE
                PRINT "GeÃ§ersiz arama tÃ¼rÃ¼!"
                RETURN
        END SELECT
        
        IF match THEN
            PRINT "ID: " + STR$(books(i).id)
            PRINT "BaÅŸlÄ±k: " + books(i).title
            PRINT "Yazar: " + books(i).author
            PRINT "Kategori: " + books(i).genre
            PRINT "Sayfa: " + STR$(books(i).pages)
            PRINT "Durum: " + get_status_text(books(i).status)
            IF books(i).rating > 0 THEN
                PRINT "Puan: " + STR$(books(i).rating) + "/5"
            END IF
            PRINT "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
            found_count = found_count + 1
        END IF
    NEXT i
    
    IF found_count = 0 THEN
        PRINT "EÅŸleÅŸen kitap bulunamadÄ±."
    ELSE
        PRINT "Toplam " + STR$(found_count) + " kitap bulundu."
    END IF
END SUB

DEF SUB update_reading_status()
    IF LEN(books) = 0 THEN
        PRINT "KÃ¼tÃ¼phanede henÃ¼z kitap yok."
        RETURN
    END IF
    
    DIM book_id AS INTEGER
    DIM new_status AS INTEGER
    DIM found AS BOOLEAN
    found = False
    
    INPUT "Kitap ID: ", book_id
    
    PRINT "Yeni durum:"
    PRINT "1. OkunmadÄ±  2. Okunuyor  3. TamamlandÄ±  4. DuraklatÄ±ldÄ±"
    INPUT "SeÃ§iminiz: ", new_status
    
    FOR i = 0 TO LEN(books) - 1
        IF books(i).id = book_id THEN
            books(i).status = new_status
            
            IF new_status = STATUS_READING THEN
                books(i).start_date = "2025-01-21"  ' Ã–rnek tarih
            ELSEIF new_status = STATUS_COMPLETED THEN
                books(i).finish_date = "2025-01-21"  ' Ã–rnek tarih
            END IF
            
            PRINT "Kitap durumu gÃ¼ncellendi: " + get_status_text(new_status)
            found = True
            EXIT FOR
        END IF
    NEXT i
    
    IF NOT found THEN
        PRINT "Kitap bulunamadÄ±!"
    END IF
END SUB

DEF SUB rate_book()
    IF LEN(books) = 0 THEN
        PRINT "KÃ¼tÃ¼phanede henÃ¼z kitap yok."
        RETURN
    END IF
    
    DIM book_id AS INTEGER
    DIM rating AS INTEGER
    DIM notes AS STRING
    DIM found AS BOOLEAN
    found = False
    
    INPUT "Kitap ID: ", book_id
    
    FOR i = 0 TO LEN(books) - 1
        IF books(i).id = book_id THEN
            PRINT "Kitap: " + books(i).title + " - " + books(i).author
            
            INPUT "Puan (1-5): ", rating
            IF rating < 1 OR rating > 5 THEN
                PRINT "Puan 1-5 arasÄ±nda olmalÄ±dÄ±r!"
                RETURN
            END IF
            books(i).rating = rating
            
            INPUT "NotlarÄ±nÄ±z: ", notes
            books(i).notes = notes
            
            PRINT "DeÄŸerlendirme kaydedildi!"
            found = True
            EXIT FOR
        END IF
    NEXT i
    
    IF NOT found THEN
        PRINT "Kitap bulunamadÄ±!"
    END IF
END SUB

DEF SUB show_statistics()
    IF LEN(books) = 0 THEN
        PRINT "Ä°statistik iÃ§in kitap gerekli."
        RETURN
    END IF
    
    DIM total_books AS INTEGER
    DIM unread_count AS INTEGER
    DIM reading_count AS INTEGER
    DIM completed_count AS INTEGER
    DIM paused_count AS INTEGER
    DIM total_pages AS INTEGER
    DIM completed_pages AS INTEGER
    
    total_books = LEN(books)
    unread_count = 0: reading_count = 0: completed_count = 0: paused_count = 0
    total_pages = 0: completed_pages = 0
    
    FOR i = 0 TO total_books - 1
        total_pages = total_pages + books(i).pages
        
        SELECT CASE books(i).status
            CASE STATUS_UNREAD
                unread_count = unread_count + 1
            CASE STATUS_READING
                reading_count = reading_count + 1
            CASE STATUS_COMPLETED
                completed_count = completed_count + 1
                completed_pages = completed_pages + books(i).pages
            CASE STATUS_PAUSED
                paused_count = paused_count + 1
        END SELECT
    NEXT i
    
    PRINT "â•”â•â•â• KÃœTÃœPHANE Ä°STATÄ°STÄ°KLERÄ° â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    PRINT "â•‘                                           â•‘"
    PRINT "â•‘ Toplam Kitap:        " + STR$(total_books) + "              â•‘"
    PRINT "â•‘ OkunmadÄ±:            " + STR$(unread_count) + "              â•‘"
    PRINT "â•‘ Okunuyor:            " + STR$(reading_count) + "              â•‘"
    PRINT "â•‘ TamamlandÄ±:          " + STR$(completed_count) + "              â•‘"
    PRINT "â•‘ DuraklatÄ±ldÄ±:        " + STR$(paused_count) + "              â•‘"
    PRINT "â•‘                                           â•‘"
    PRINT "â•‘ Toplam Sayfa:        " + STR$(total_pages) + "            â•‘"
    PRINT "â•‘ Okunan Sayfa:        " + STR$(completed_pages) + "            â•‘"
    PRINT "â•‘                                           â•‘"
    
    IF total_books > 0 THEN
        DIM completion_rate AS DOUBLE
        completion_rate = (completed_count / total_books) * 100
        PRINT "â•‘ Tamamlama OranÄ±:     %" + STR$(ROUND(completion_rate, 1)) + "          â•‘"
    END IF
    
    IF completed_count > 0 THEN
        DIM avg_pages AS DOUBLE
        avg_pages = completed_pages / completed_count
        PRINT "â•‘ Ort. Kitap Boyu:     " + STR$(ROUND(avg_pages, 0)) + " sayfa     â•‘"
    END IF
    
    PRINT "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    
    REM En yÃ¼ksek puanlÄ± kitaplar
    PRINT
    PRINT "En YÃ¼ksek PuanlÄ± Kitaplar:"
    FOR rating_check = 5 TO 1 STEP -1
        FOR i = 0 TO LEN(books) - 1
            IF books(i).rating = rating_check THEN
                PRINT "â­ " + STR$(rating_check) + "/5 - " + books(i).title + " (" + books(i).author + ")"
                EXIT FOR
            END IF
        NEXT i
    NEXT rating_check
END SUB

DEF SUB genre_analysis()
    IF LEN(books) = 0 THEN
        PRINT "Analiz iÃ§in kitap gerekli."
        RETURN
    END IF
    
    PRINT "â•â•â• KATEGORÄ° ANALÄ°ZÄ° â•â•â•"
    
    FOR j = 0 TO LEN(genres) - 1
        DIM genre_count AS INTEGER
        DIM genre_completed AS INTEGER
        
        genre_count = 0
        genre_completed = 0
        
        FOR i = 0 TO LEN(books) - 1
            IF books(i).genre = genres(j) THEN
                genre_count = genre_count + 1
                IF books(i).status = STATUS_COMPLETED THEN
                    genre_completed = genre_completed + 1
                END IF
            END IF
        NEXT i
        
        IF genre_count > 0 THEN
            DIM completion_rate AS DOUBLE
            completion_rate = (genre_completed / genre_count) * 100
            PRINT genres(j) + ": " + STR$(genre_count) + " kitap (%" + 
                  STR$(ROUND(completion_rate, 1)) + " tamamlandÄ±)"
        END IF
    NEXT j
END SUB

DEF SUB reading_goals()
    PRINT "â•â•â• OKUMA HEDEFLERÄ° â•â•â•"
    
    DIM yearly_goal AS INTEGER
    DIM completed_this_year AS INTEGER
    
    yearly_goal = 24  ' YÄ±lda 24 kitap hedefi
    completed_this_year = 0
    
    FOR i = 0 TO LEN(books) - 1
        IF books(i).status = STATUS_COMPLETED THEN
            completed_this_year = completed_this_year + 1
        END IF
    NEXT i
    
    DIM progress_rate AS DOUBLE
    progress_rate = (completed_this_year / yearly_goal) * 100
    
    PRINT "2025 YÄ±lÄ± Okuma Hedefi: " + STR$(yearly_goal) + " kitap"
    PRINT "Åžimdiye kadar okunan: " + STR$(completed_this_year) + " kitap"
    PRINT "Hedef tamamlama: %" + STR$(ROUND(progress_rate, 1))
    PRINT "Kalan kitap: " + STR$(yearly_goal - completed_this_year)
    
    IF progress_rate >= 100 THEN
        PRINT "ðŸŽ‰ Tebrikler! Hedefinizi aÅŸtÄ±nÄ±z!"
    ELSEIF progress_rate >= 80 THEN
        PRINT "ðŸŒŸ Harika gidiyorsunuz!"
    ELSEIF progress_rate >= 50 THEN
        PRINT "ðŸ“š Ä°yi bir tempoda devam ediyorsunuz."
    ELSE
        PRINT "ðŸ“– Hedefinize ulaÅŸmak iÃ§in daha Ã§ok okuma yapmanÄ±z gerekiyor."
    END IF
END SUB

DEF SUB delete_book()
    IF LEN(books) = 0 THEN
        PRINT "Silinecek kitap yok."
        RETURN
    END IF
    
    DIM book_id AS INTEGER
    INPUT "Silinecek kitap ID: ", book_id
    
    FOR i = 0 TO LEN(books) - 1
        IF books(i).id = book_id THEN
            PRINT "Silinecek kitap: " + books(i).title
            DIM confirm AS STRING
            INPUT "Silmek istediÄŸinizden emin misiniz? (e/h): ", confirm
            
            IF UCASE$(confirm) = "E" THEN
                REMOVE(books, i)
                PRINT "Kitap baÅŸarÄ±yla silindi."
            ELSE
                PRINT "Silme iÅŸlemi iptal edildi."
            END IF
            RETURN
        END IF
    NEXT i
    
    PRINT "Kitap bulunamadÄ±!"
END SUB

REM Ana program dÃ¶ngÃ¼sÃ¼
DIM running AS BOOLEAN
running = True

WHILE running
    show_main_menu()
    
    DIM choice AS INTEGER
    INPUT "SeÃ§iminiz (1-10): ", choice
    
    SELECT CASE choice
        CASE 1
            add_book()
        CASE 2
            list_books()
        CASE 3
            search_books()
        CASE 4
            update_reading_status()
        CASE 5
            rate_book()
        CASE 6
            show_statistics()
        CASE 7
            genre_analysis()
        CASE 8
            reading_goals()
        CASE 9
            delete_book()
        CASE 10
            running = False
            PRINT "Program kapatÄ±lÄ±yor..."
        CASE ELSE
            PRINT "GeÃ§ersiz seÃ§im!"
    END SELECT
    
    IF running THEN
        PRINT
        INPUT "Devam etmek iÃ§in Enter tuÅŸuna basÄ±n...", dummy
        PRINT
    END IF
WEND

PRINT "KiÅŸisel kÃ¼tÃ¼phane yÃ¶netimi kapatÄ±ldÄ±."
