REM √ñrnek 7: Envanter ve Stok Y√∂netim Sistemi
REM Bu program i≈ületmeler i√ßin kapsamlƒ± envanter takibi yapar

PRINT "‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
PRINT "‚ïë   ENVANTER VE STOK Y√ñNETƒ∞M Sƒ∞STEMƒ∞   ‚ïë"
PRINT "‚ïë           pdsXv11g v1.0              ‚ïë"
PRINT "‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
PRINT

REM Global veri yapƒ±larƒ±
DIM products AS ARRAY
DIM transactions AS ARRAY
DIM suppliers AS ARRAY
DIM categories AS ARRAY
DIM low_stock_alerts AS ARRAY

REM Sistem ba≈ülatma
products = []
transactions = []
suppliers = []
categories = ["Elektronik", "Giyim", "Gƒ±da", "Ev E≈üyasƒ±", "Kozmetik", "Kitap", "Spor", "Oyuncak"]
low_stock_alerts = []

REM √ñrnek veriler ekleme
call initialize_sample_data()

DEF SUB initialize_sample_data()
    REM √ñrnek tedarik√ßiler
    suppliers = [
        {"name": "ABC Tedarik", "contact": "0212-111-1111", "email": "info@abctedarik.com"},
        {"name": "XYZ Daƒüƒ±tƒ±m", "contact": "0216-222-2222", "email": "satis@xyzdagitim.com"},
        {"name": "Mega Toptan", "contact": "0312-333-3333", "email": "siparis@megatoptan.com"}
    ]
    
    REM √ñrnek √ºr√ºnler
    products = [
        {"id": 1001, "name": "Laptop Dell", "category": "Elektronik", "stock": 25, "min_stock": 10, 
         "price": 8500.00, "supplier": "ABC Tedarik", "description": "15.6 in√ß laptop"},
        {"id": 1002, "name": "Bluetooth Kulaklƒ±k", "category": "Elektronik", "stock": 50, "min_stock": 15,
         "price": 299.90, "supplier": "XYZ Daƒüƒ±tƒ±m", "description": "Kablosuz kulaklƒ±k"},
        {"id": 1003, "name": "T-Shirt Pamuk", "category": "Giyim", "stock": 100, "min_stock": 25,
         "price": 45.00, "supplier": "Mega Toptan", "description": "100% pamuk t-shirt"},
        {"id": 1004, "name": "Kahve Makinesi", "category": "Ev E≈üyasƒ±", "stock": 8, "min_stock": 5,
         "price": 1250.00, "supplier": "ABC Tedarik", "description": "Otomatik kahve makinesi"},
        {"id": 1005, "name": "Protein Tozu", "category": "Spor", "stock": 3, "min_stock": 10,
         "price": 180.00, "supplier": "XYZ Daƒüƒ±tƒ±m", "description": "Whey protein 1kg"}
    ]
    
    REM √ñrnek i≈ülemler
    transactions = [
        {"type": "giri≈ü", "product_id": 1001, "quantity": 30, "date": "2024-01-15", "price": 8000.00, "note": "ƒ∞lk stok"},
        {"type": "√ßƒ±kƒ±≈ü", "product_id": 1001, "quantity": 5, "date": "2024-01-20", "price": 8500.00, "note": "Satƒ±≈ü"},
        {"type": "giri≈ü", "product_id": 1002, "quantity": 100, "date": "2024-01-10", "price": 250.00, "note": "Yeni sipari≈ü"}
    ]
END SUB

DEF SUB show_main_menu()
    PRINT "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
    PRINT "1. √úr√ºn Y√∂netimi"
    PRINT "2. Stok Hareketleri"
    PRINT "3. Raporlar ve Analizler"
    PRINT "4. Tedarik√ßi Y√∂netimi"
    PRINT "5. D√º≈ü√ºk Stok Uyarƒ±larƒ±"
    PRINT "6. Envanter Deƒüerleme"
    PRINT "7. Kategori Y√∂netimi"
    PRINT "8. Stok Devir Analizi"
    PRINT "9. Tahmin ve Planlama"
    PRINT "10. Sistem Ayarlarƒ±"
    PRINT "11. √áƒ±kƒ±≈ü"
    PRINT "‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ"
END SUB

DEF SUB product_management()
    DIM running AS BOOLEAN
    running = True
    
    WHILE running
        PRINT
        PRINT "‚ïê‚ïê‚ïê √úR√úN Y√ñNETƒ∞Mƒ∞ ‚ïê‚ïê‚ïê"
        PRINT "1. √úr√ºn Listesi"
        PRINT "2. Yeni √úr√ºn Ekle"
        PRINT "3. √úr√ºn G√ºncelle"
        PRINT "4. √úr√ºn Sil"
        PRINT "5. √úr√ºn Ara"
        PRINT "6. Ana Men√ºye D√∂n"
        
        INPUT "Se√ßiminiz: ", choice
        
        SELECT CASE choice
            CASE 1: call list_products()
            CASE 2: call add_product()
            CASE 3: call update_product()
            CASE 4: call delete_product()
            CASE 5: call search_products()
            CASE 6: running = False
        END SELECT
    WEND
END SUB

DEF SUB list_products()
    PRINT
    PRINT "√úR√úN Lƒ∞STESƒ∞:"
    PRINT STRING$(100, "=")
    PRINT "ID    | √úr√ºn Adƒ±           | Kategori    | Stok | Min  | Fiyat    | Tedarik√ßi"
    PRINT STRING$(100, "-")
    
    FOR i = 0 TO LEN(products) - 1
        DIM p AS OBJECT
        p = products(i)
        
        PRINT RIGHT$("     " + STR$(p.id), 5) + " | " +
              LEFT$(p.name + STRING$(18, " "), 18) + " | " +
              LEFT$(p.category + STRING$(10, " "), 10) + " | " +
              RIGHT$("    " + STR$(p.stock), 4) + " | " +
              RIGHT$("   " + STR$(p.min_stock), 3) + " | " +
              RIGHT$("       " + STR$(p.price), 8) + " | " +
              p.supplier
    NEXT i
    
    PRINT STRING$(100, "=")
    PRINT "Toplam √ºr√ºn sayƒ±sƒ±: " + STR$(LEN(products))
END SUB

DEF SUB add_product()
    PRINT
    PRINT "YENƒ∞ √úR√úN EKLEME:"
    
    DIM new_product AS OBJECT
    DIM new_id AS INTEGER
    
    REM Yeni ID olu≈ütur
    new_id = 1000
    FOR i = 0 TO LEN(products) - 1
        IF products(i).id >= new_id THEN
            new_id = products(i).id + 1
        END IF
    NEXT i
    
    new_product.id = new_id
    PRINT "Yeni √ºr√ºn ID: " + STR$(new_id)
    
    INPUT "√úr√ºn adƒ±: ", new_product.name
    
    PRINT "Kategoriler:"
    FOR i = 0 TO LEN(categories) - 1
        PRINT STR$(i + 1) + ". " + categories(i)
    NEXT i
    INPUT "Kategori numarasƒ±: ", cat_num
    IF cat_num >= 1 AND cat_num <= LEN(categories) THEN
        new_product.category = categories(cat_num - 1)
    ELSE
        INPUT "√ñzel kategori adƒ±: ", new_product.category
    END IF
    
    INPUT "Ba≈ülangƒ±√ß stok miktarƒ±: ", new_product.stock
    INPUT "Minimum stok miktarƒ±: ", new_product.min_stock
    INPUT "Birim fiyat: ", new_product.price
    
    PRINT "Tedarik√ßiler:"
    FOR i = 0 TO LEN(suppliers) - 1
        PRINT STR$(i + 1) + ". " + suppliers(i).name
    NEXT i
    INPUT "Tedarik√ßi numarasƒ± (veya 0 i√ßin yeni): ", sup_num
    
    IF sup_num >= 1 AND sup_num <= LEN(suppliers) THEN
        new_product.supplier = suppliers(sup_num - 1).name
    ELSE
        INPUT "Tedarik√ßi adƒ±: ", new_product.supplier
    END IF
    
    INPUT "√úr√ºn a√ßƒ±klamasƒ±: ", new_product.description
    
    INSERT(products, new_product)
    
    REM Stok giri≈ü kaydƒ± olu≈ütur
    IF new_product.stock > 0 THEN
        DIM trans AS OBJECT
        trans.type = "giri≈ü"
        trans.product_id = new_product.id
        trans.quantity = new_product.stock
        trans.date = FORMAT$(NOW(), "yyyy-mm-dd")
        trans.price = new_product.price
        trans.note = "ƒ∞lk stok giri≈üi"
        INSERT(transactions, trans)
    END IF
    
    PRINT
    PRINT "√úr√ºn ba≈üarƒ±yla eklendi! ID: " + STR$(new_product.id)
END SUB

DEF SUB update_product()
    INPUT "G√ºncellenecek √ºr√ºn ID: ", product_id
    
    DIM product_index AS INTEGER
    product_index = -1
    
    FOR i = 0 TO LEN(products) - 1
        IF products(i).id = product_id THEN
            product_index = i
            EXIT FOR
        END IF
    NEXT i
    
    IF product_index = -1 THEN
        PRINT "√úr√ºn bulunamadƒ±!"
        EXIT SUB
    END IF
    
    DIM p AS OBJECT
    p = products(product_index)
    
    PRINT
    PRINT "Mevcut √ºr√ºn bilgileri:"
    PRINT "Ad: " + p.name
    PRINT "Kategori: " + p.category
    PRINT "Stok: " + STR$(p.stock)
    PRINT "Min stok: " + STR$(p.min_stock)
    PRINT "Fiyat: " + STR$(p.price)
    PRINT "Tedarik√ßi: " + p.supplier
    
    PRINT
    PRINT "Yeni deƒüerler girin (deƒüi≈ütirmek istemiyorsanƒ±z Enter basƒ±n):"
    
    INPUT "Yeni ad: ", new_name
    IF new_name <> "" THEN p.name = new_name
    
    INPUT "Yeni kategori: ", new_category
    IF new_category <> "" THEN p.category = new_category
    
    INPUT "Yeni minimum stok: ", new_min
    IF new_min > 0 THEN p.min_stock = new_min
    
    INPUT "Yeni fiyat: ", new_price
    IF new_price > 0 THEN p.price = new_price
    
    INPUT "Yeni tedarik√ßi: ", new_supplier
    IF new_supplier <> "" THEN p.supplier = new_supplier
    
    INPUT "Yeni a√ßƒ±klama: ", new_desc
    IF new_desc <> "" THEN p.description = new_desc
    
    products(product_index) = p
    PRINT "√úr√ºn g√ºncellendi!"
END SUB

DEF SUB delete_product()
    INPUT "Silinecek √ºr√ºn ID: ", product_id
    
    DIM product_index AS INTEGER
    product_index = -1
    
    FOR i = 0 TO LEN(products) - 1
        IF products(i).id = product_id THEN
            product_index = i
            EXIT FOR
        END IF
    NEXT i
    
    IF product_index = -1 THEN
        PRINT "√úr√ºn bulunamadƒ±!"
        EXIT SUB
    END IF
    
    PRINT "√úr√ºn: " + products(product_index).name
    INPUT "Bu √ºr√ºn√º silmek istediƒüinizden emin misiniz? (E/H): ", confirm
    
    IF UPPER$(confirm) = "E" THEN
        DELETE(products, product_index)
        PRINT "√úr√ºn silindi!"
    ELSE
        PRINT "Silme i≈ülemi iptal edildi."
    END IF
END SUB

DEF SUB search_products()
    PRINT
    PRINT "√úR√úN ARAMA:"
    PRINT "1. ƒ∞sme g√∂re ara"
    PRINT "2. Kategoriye g√∂re ara"
    PRINT "3. Tedarik√ßiye g√∂re ara"
    PRINT "4. D√º≈ü√ºk stoklu √ºr√ºnler"
    
    INPUT "Se√ßiminiz: ", search_type
    
    DIM results AS ARRAY
    results = []
    
    SELECT CASE search_type
        CASE 1
            INPUT "Aranacak √ºr√ºn adƒ±: ", search_term
            FOR i = 0 TO LEN(products) - 1
                IF INSTR(UPPER$(products(i).name), UPPER$(search_term)) > 0 THEN
                    INSERT(results, products(i))
                END IF
            NEXT i
            
        CASE 2
            INPUT "Aranacak kategori: ", search_term
            FOR i = 0 TO LEN(products) - 1
                IF INSTR(UPPER$(products(i).category), UPPER$(search_term)) > 0 THEN
                    INSERT(results, products(i))
                END IF
            NEXT i
            
        CASE 3
            INPUT "Aranacak tedarik√ßi: ", search_term
            FOR i = 0 TO LEN(products) - 1
                IF INSTR(UPPER$(products(i).supplier), UPPER$(search_term)) > 0 THEN
                    INSERT(results, products(i))
                END IF
            NEXT i
            
        CASE 4
            FOR i = 0 TO LEN(products) - 1
                IF products(i).stock <= products(i).min_stock THEN
                    INSERT(results, products(i))
                END IF
            NEXT i
    END SELECT
    
    IF LEN(results) = 0 THEN
        PRINT "Arama kriterine uygun √ºr√ºn bulunamadƒ±."
    ELSE
        PRINT
        PRINT "ARAMA SONU√áLARI:"
        PRINT STRING$(80, "-")
        FOR i = 0 TO LEN(results) - 1
            DIM r AS OBJECT
            r = results(i)
            PRINT "ID: " + STR$(r.id) + " | " + r.name + " | Stok: " + STR$(r.stock)
        NEXT i
        PRINT STRING$(80, "-")
        PRINT "Bulunan √ºr√ºn sayƒ±sƒ±: " + STR$(LEN(results))
    END IF
END SUB

DEF SUB stock_movements()
    DIM running AS BOOLEAN
    running = True
    
    WHILE running
        PRINT
        PRINT "‚ïê‚ïê‚ïê STOK HAREKETLERƒ∞ ‚ïê‚ïê‚ïê"
        PRINT "1. Stok Giri≈ü"
        PRINT "2. Stok √áƒ±kƒ±≈ü"
        PRINT "3. Stok Transfer"
        PRINT "4. Hareket Ge√ßmi≈üi"
        PRINT "5. Ana Men√ºye D√∂n"
        
        INPUT "Se√ßiminiz: ", choice
        
        SELECT CASE choice
            CASE 1: call stock_in()
            CASE 2: call stock_out()
            CASE 3: call stock_transfer()
            CASE 4: call movement_history()
            CASE 5: running = False
        END SELECT
    WEND
END SUB

DEF SUB stock_in()
    PRINT
    PRINT "STOK Gƒ∞Rƒ∞≈û:"
    
    INPUT "√úr√ºn ID: ", product_id
    
    DIM product_index AS INTEGER
    product_index = find_product_by_id(product_id)
    
    IF product_index = -1 THEN
        PRINT "√úr√ºn bulunamadƒ±!"
        EXIT SUB
    END IF
    
    DIM p AS OBJECT
    p = products(product_index)
    
    PRINT "√úr√ºn: " + p.name + " (Mevcut stok: " + STR$(p.stock) + ")"
    
    INPUT "Giri≈ü miktarƒ±: ", quantity
    INPUT "Birim maliyet: ", cost
    INPUT "Not (isteƒüe baƒülƒ±): ", note
    
    IF quantity <= 0 THEN
        PRINT "Ge√ßersiz miktar!"
        EXIT SUB
    END IF
    
    p.stock = p.stock + quantity
    products(product_index) = p
    
    REM Hareket kaydƒ± olu≈ütur
    DIM trans AS OBJECT
    trans.type = "giri≈ü"
    trans.product_id = product_id
    trans.quantity = quantity
    trans.date = FORMAT$(NOW(), "yyyy-mm-dd")
    trans.price = cost
    trans.note = note
    INSERT(transactions, trans)
    
    PRINT "Stok giri≈üi tamamlandƒ±. Yeni stok: " + STR$(p.stock)
END SUB

DEF SUB stock_out()
    PRINT
    PRINT "STOK √áIKI≈û:"
    
    INPUT "√úr√ºn ID: ", product_id
    
    DIM product_index AS INTEGER
    product_index = find_product_by_id(product_id)
    
    IF product_index = -1 THEN
        PRINT "√úr√ºn bulunamadƒ±!"
        EXIT SUB
    END IF
    
    DIM p AS OBJECT
    p = products(product_index)
    
    PRINT "√úr√ºn: " + p.name + " (Mevcut stok: " + STR$(p.stock) + ")"
    
    INPUT "√áƒ±kƒ±≈ü miktarƒ±: ", quantity
    INPUT "Satƒ±≈ü fiyatƒ±: ", price
    INPUT "Not (isteƒüe baƒülƒ±): ", note
    
    IF quantity <= 0 THEN
        PRINT "Ge√ßersiz miktar!"
        EXIT SUB
    END IF
    
    IF quantity > p.stock THEN
        PRINT "Yetersiz stok! Mevcut: " + STR$(p.stock)
        INPUT "Yine de devam etmek istiyor musunuz? (E/H): ", confirm
        IF UPPER$(confirm) <> "E" THEN
            EXIT SUB
        END IF
    END IF
    
    p.stock = p.stock - quantity
    products(product_index) = p
    
    REM Hareket kaydƒ± olu≈ütur
    DIM trans AS OBJECT
    trans.type = "√ßƒ±kƒ±≈ü"
    trans.product_id = product_id
    trans.quantity = quantity
    trans.date = FORMAT$(NOW(), "yyyy-mm-dd")
    trans.price = price
    trans.note = note
    INSERT(transactions, trans)
    
    PRINT "Stok √ßƒ±kƒ±≈üƒ± tamamlandƒ±. Kalan stok: " + STR$(p.stock)
    
    REM D√º≈ü√ºk stok kontrol√º
    IF p.stock <= p.min_stock THEN
        PRINT "‚ö†Ô∏è  UYARI: D√º≈ü√ºk stok seviyesi!"
        call add_low_stock_alert(product_id)
    END IF
END SUB

DEF FUNCTION find_product_by_id(id AS INTEGER) AS INTEGER
    FOR i = 0 TO LEN(products) - 1
        IF products(i).id = id THEN
            RETURN i
        END IF
    NEXT i
    RETURN -1
END FUNCTION

DEF SUB add_low_stock_alert(product_id AS INTEGER)
    REM Zaten uyarƒ± var mƒ± kontrol et
    FOR i = 0 TO LEN(low_stock_alerts) - 1
        IF low_stock_alerts(i) = product_id THEN
            EXIT SUB  ' Zaten var
        END IF
    NEXT i
    
    INSERT(low_stock_alerts, product_id)
END SUB

DEF SUB movement_history()
    PRINT
    PRINT "HAREKETLERƒ∞ Fƒ∞LTRELE:"
    PRINT "1. T√ºm hareketler"
    PRINT "2. Belirli √ºr√ºn"
    PRINT "3. Belirli tarih aralƒ±ƒüƒ±"
    PRINT "4. Hareket tipine g√∂re"
    
    INPUT "Se√ßiminiz: ", filter_type
    
    DIM filtered_transactions AS ARRAY
    filtered_transactions = []
    
    SELECT CASE filter_type
        CASE 1
            filtered_transactions = transactions
            
        CASE 2
            INPUT "√úr√ºn ID: ", filter_product_id
            FOR i = 0 TO LEN(transactions) - 1
                IF transactions(i).product_id = filter_product_id THEN
                    INSERT(filtered_transactions, transactions(i))
                END IF
            NEXT i
            
        CASE 3
            INPUT "Ba≈ülangƒ±√ß tarihi (yyyy-mm-dd): ", start_date
            INPUT "Biti≈ü tarihi (yyyy-mm-dd): ", end_date
            FOR i = 0 TO LEN(transactions) - 1
                IF transactions(i).date >= start_date AND transactions(i).date <= end_date THEN
                    INSERT(filtered_transactions, transactions(i))
                END IF
            NEXT i
            
        CASE 4
            INPUT "Hareket tipi (giri≈ü/√ßƒ±kƒ±≈ü): ", move_type
            FOR i = 0 TO LEN(transactions) - 1
                IF transactions(i).type = move_type THEN
                    INSERT(filtered_transactions, transactions(i))
                END IF
            NEXT i
    END SELECT
    
    IF LEN(filtered_transactions) = 0 THEN
        PRINT "G√∂sterilecek hareket bulunamadƒ±."
        EXIT SUB
    END IF
    
    PRINT
    PRINT "HAREKET GE√áMƒ∞≈ûƒ∞:"
    PRINT STRING$(90, "=")
    PRINT "Tarih      | Tip   | √úr√ºn ID | √úr√ºn Adƒ±        | Miktar | Fiyat   | Not"
    PRINT STRING$(90, "-")
    
    FOR i = 0 TO LEN(filtered_transactions) - 1
        DIM t AS OBJECT
        t = filtered_transactions(i)
        
        DIM product_name AS STRING
        DIM p_idx AS INTEGER
        p_idx = find_product_by_id(t.product_id)
        
        IF p_idx >= 0 THEN
            product_name = products(p_idx).name
        ELSE
            product_name = "Silinmi≈ü √úr√ºn"
        END IF
        
        PRINT t.date + " | " +
              LEFT$(t.type + "     ", 5) + " | " +
              RIGHT$("      " + STR$(t.product_id), 7) + " | " +
              LEFT$(product_name + STRING$(15, " "), 15) + " | " +
              RIGHT$("     " + STR$(t.quantity), 6) + " | " +
              RIGHT$("      " + STR$(t.price), 7) + " | " +
              t.note
    NEXT i
    
    PRINT STRING$(90, "=")
    PRINT "Toplam hareket sayƒ±sƒ±: " + STR$(LEN(filtered_transactions))
END SUB

DEF SUB reports_and_analysis()
    DIM running AS BOOLEAN
    running = True
    
    WHILE running
        PRINT
        PRINT "‚ïê‚ïê‚ïê RAPORLAR VE ANALƒ∞ZLER ‚ïê‚ïê‚ïê"
        PRINT "1. Stok Durum Raporu"
        PRINT "2. Deƒüer Raporu"
        PRINT "3. Kategori Analizi"
        PRINT "4. Tedarik√ßi Analizi"
        PRINT "5. Satƒ±≈ü Analizi"
        PRINT "6. Karlƒ±lƒ±k Analizi"
        PRINT "7. Ana Men√ºye D√∂n"
        
        INPUT "Se√ßiminiz: ", choice
        
        SELECT CASE choice
            CASE 1: call stock_status_report()
            CASE 2: call value_report()
            CASE 3: call category_analysis()
            CASE 4: call supplier_analysis()
            CASE 5: call sales_analysis()
            CASE 6: call profitability_analysis()
            CASE 7: running = False
        END SELECT
    WEND
END SUB

DEF SUB stock_status_report()
    PRINT
    PRINT "STOK DURUM RAPORU:"
    PRINT STRING$(80, "=")
    
    DIM total_products AS INTEGER
    DIM low_stock_count AS INTEGER
    DIM out_of_stock_count AS INTEGER
    DIM overstocked_count AS INTEGER
    
    total_products = LEN(products)
    low_stock_count = 0
    out_of_stock_count = 0
    overstocked_count = 0
    
    FOR i = 0 TO LEN(products) - 1
        DIM p AS OBJECT
        p = products(i)
        
        IF p.stock = 0 THEN
            out_of_stock_count = out_of_stock_count + 1
        ELSEIF p.stock <= p.min_stock THEN
            low_stock_count = low_stock_count + 1
        ELSEIF p.stock > (p.min_stock * 3) THEN  ' Fazla stok kriteri
            overstocked_count = overstocked_count + 1
        END IF
    NEXT i
    
    PRINT "Toplam √ºr√ºn sayƒ±sƒ±: " + STR$(total_products)
    PRINT "Stokta t√ºkenen: " + STR$(out_of_stock_count)
    PRINT "D√º≈ü√ºk stoklu: " + STR$(low_stock_count)
    PRINT "Fazla stoklu: " + STR$(overstocked_count)
    PRINT "Normal stoklu: " + STR$(total_products - out_of_stock_count - low_stock_count - overstocked_count)
    
    PRINT
    PRINT "D√ú≈û√úK STOKLU √úR√úNLER:"
    PRINT STRING$(60, "-")
    FOR i = 0 TO LEN(products) - 1
        DIM p AS OBJECT
        p = products(i)
        IF p.stock <= p.min_stock THEN
            PRINT STR$(p.id) + " | " + p.name + " | Stok: " + STR$(p.stock) + " | Min: " + STR$(p.min_stock)
        END IF
    NEXT i
END SUB

DEF SUB value_report()
    PRINT
    PRINT "DEƒûER RAPORU:"
    PRINT STRING$(70, "=")
    
    DIM total_value AS DOUBLE
    DIM total_quantity AS INTEGER
    
    total_value = 0
    total_quantity = 0
    
    FOR i = 0 TO LEN(products) - 1
        DIM p AS OBJECT
        p = products(i)
        
        DIM product_value AS DOUBLE
        product_value = p.stock * p.price
        total_value = total_value + product_value
        total_quantity = total_quantity + p.stock
        
        PRINT LEFT$(p.name + STRING$(20, " "), 20) + " | " +
              RIGHT$("     " + STR$(p.stock), 6) + " | " +
              RIGHT$("        " + STR$(p.price), 9) + " | " +
              RIGHT$("          " + STR$(ROUND(product_value, 2)), 11)
    NEXT i
    
    PRINT STRING$(70, "=")
    PRINT "TOPLAM DEƒûERLENDƒ∞RME:"
    PRINT "Toplam √ºr√ºn adedi: " + STR$(total_quantity)
    PRINT "Toplam stok deƒüeri: " + STR$(ROUND(total_value, 2)) + " ‚Ç∫"
    PRINT "Ortalama √ºr√ºn deƒüeri: " + STR$(ROUND(total_value / LEN(products), 2)) + " ‚Ç∫"
END SUB

DEF SUB low_stock_alerts()
    PRINT
    PRINT "‚ïê‚ïê‚ïê D√ú≈û√úK STOK UYARILARI ‚ïê‚ïê‚ïê"
    
    REM D√º≈ü√ºk stok listesini g√ºncelle
    low_stock_alerts = []
    FOR i = 0 TO LEN(products) - 1
        IF products(i).stock <= products(i).min_stock THEN
            INSERT(low_stock_alerts, products(i).id)
        END IF
    NEXT i
    
    IF LEN(low_stock_alerts) = 0 THEN
        PRINT "‚úÖ D√º≈ü√ºk stoklu √ºr√ºn bulunmuyor!"
    ELSE
        PRINT "‚ö†Ô∏è  " + STR$(LEN(low_stock_alerts)) + " √ºr√ºn d√º≈ü√ºk stok seviyesinde!"
        PRINT STRING$(80, "-")
        
        FOR i = 0 TO LEN(low_stock_alerts) - 1
            DIM product_id AS INTEGER
            product_id = low_stock_alerts(i)
            
            DIM p_idx AS INTEGER
            p_idx = find_product_by_id(product_id)
            
            IF p_idx >= 0 THEN
                DIM p AS OBJECT
                p = products(p_idx)
                
                DIM urgency AS STRING
                IF p.stock = 0 THEN
                    urgency = "üî¥ T√úKENDƒ∞"
                ELSEIF p.stock < (p.min_stock / 2) THEN
                    urgency = "üü† ACƒ∞L"
                ELSE
                    urgency = "üü° D√ú≈û√úK"
                END IF
                
                PRINT urgency + " | " + STR$(p.id) + " | " + p.name
                PRINT "    Mevcut: " + STR$(p.stock) + " | Minimum: " + STR$(p.min_stock)
                PRINT "    Tedarik√ßi: " + p.supplier
                PRINT
            END IF
        NEXT i
        
        INPUT "Bu √ºr√ºnler i√ßin sipari≈ü olu≈üturmak istiyor musunuz? (E/H): ", create_order
        IF UPPER$(create_order) = "E" THEN
            call create_purchase_order()
        END IF
    END IF
END SUB

DEF SUB create_purchase_order()
    PRINT
    PRINT "Sƒ∞PARƒ∞≈û OLU≈ûTUR:"
    PRINT STRING$(50, "-")
    
    FOR i = 0 TO LEN(low_stock_alerts) - 1
        DIM product_id AS INTEGER
        product_id = low_stock_alerts(i)
        
        DIM p_idx AS INTEGER
        p_idx = find_product_by_id(product_id)
        
        IF p_idx >= 0 THEN
            DIM p AS OBJECT
            p = products(p_idx)
            
            PRINT "√úr√ºn: " + p.name + " (Mevcut: " + STR$(p.stock) + ")"
            DIM suggested_quantity AS INTEGER
            suggested_quantity = p.min_stock * 2 - p.stock
            
            INPUT "Sipari≈ü miktarƒ± [√ñnerilen: " + STR$(suggested_quantity) + "]: ", order_qty
            
            IF order_qty = 0 THEN order_qty = suggested_quantity
            
            IF order_qty > 0 THEN
                PRINT "‚úÖ " + p.name + " - " + STR$(order_qty) + " adet sipari≈ü listesine eklendi"
                PRINT "   Tedarik√ßi: " + p.supplier
            END IF
            PRINT
        END IF
    NEXT i
    
    PRINT "Sipari≈ü listesi olu≈üturuldu. Tedarik√ßilerle ileti≈üime ge√ßin."
END SUB

REM Ana program d√∂ng√ºs√º
DIM running AS BOOLEAN
running = True

WHILE running
    show_main_menu()
    
    DIM choice AS INTEGER
    INPUT "Se√ßiminiz (1-11): ", choice
    
    SELECT CASE choice
        CASE 1
            product_management()
        CASE 2
            stock_movements()
        CASE 3
            reports_and_analysis()
        CASE 4
            PRINT "Tedarik√ßi y√∂netimi mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 5
            low_stock_alerts()
        CASE 6
            value_report()
        CASE 7
            PRINT "Kategori y√∂netimi mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 8
            PRINT "Stok devir analizi mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 9
            PRINT "Tahmin ve planlama mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 10
            PRINT "Sistem ayarlarƒ± mod√ºl√º geli≈ütirme a≈üamasƒ±nda..."
        CASE 11
            running = False
            PRINT "Envanter sistemi kapatƒ±lƒ±yor..."
        CASE ELSE
            PRINT "Ge√ßersiz se√ßim!"
    END SELECT
    
    IF running THEN
        PRINT
        INPUT "Devam etmek i√ßin Enter tu≈üuna basƒ±n...", dummy
        PRINT
    END IF
WEND

PRINT "Envanter y√∂netim sistemi kapatƒ±ldƒ±."
