REM Oyun 3: 2048
REM SayÄ±larÄ± birleÅŸtirerek 2048'e ulaÅŸma oyunu

PRINT "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
PRINT "â•‘               2048                   â•‘"
PRINT "â•‘           pdsXv11g v1.0              â•‘"
PRINT "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
PRINT

REM Global deÄŸiÅŸkenler
DIM board AS ARRAY
DIM score AS INTEGER
DIM best_score AS INTEGER
DIM moves_count AS INTEGER
DIM game_won AS BOOLEAN
DIM game_over AS BOOLEAN

REM Oyunu baÅŸlat
call initialize_2048()

DEF SUB initialize_2048()
    REM 4x4 tahta oluÅŸtur
    board = []
    FOR i = 0 TO 3
        DIM row AS ARRAY
        row = []
        FOR j = 0 TO 3
            INSERT(row, 0)
        NEXT j
        INSERT(board, row)
    NEXT i
    
    score = 0
    best_score = 2048  ' VarsayÄ±lan en yÃ¼ksek skor
    moves_count = 0
    game_won = False
    game_over = False
    
    REM Ä°lk iki sayÄ±yÄ± ekle
    call add_random_tile()
    call add_random_tile()
    
    PRINT "2048 oyunu baÅŸlatÄ±ldÄ±!"
    PRINT "Hedef: KarolarÄ± birleÅŸtirerek 2048'e ulaÅŸÄ±n!"
END SUB

DEF SUB add_random_tile()
    REM BoÅŸ hÃ¼creleri bul
    DIM empty_cells AS ARRAY
    empty_cells = []
    
    FOR i = 0 TO 3
        FOR j = 0 TO 3
            IF board(i)(j) = 0 THEN
                INSERT(empty_cells, [i, j])
            END IF
        NEXT j
    NEXT i
    
    REM BoÅŸ hÃ¼cre yoksa Ã§Ä±k
    IF LEN(empty_cells) = 0 THEN
        EXIT SUB
    END IF
    
    REM Rastgele boÅŸ hÃ¼cre seÃ§
    DIM random_index AS INTEGER
    random_index = RND(0, LEN(empty_cells) - 1)
    
    DIM cell AS ARRAY
    cell = empty_cells(random_index)
    
    REM %90 ihtimalle 2, %10 ihtimalle 4 ekle
    DIM value AS INTEGER
    IF RND(1, 10) <= 9 THEN
        value = 2
    ELSE
        value = 4
    END IF
    
    board(cell(0))(cell(1)) = value
END SUB

DEF SUB show_board()
    PRINT
    PRINT "Skor: " + STR$(score) + "  |  En Ä°yi: " + STR$(best_score) + "  |  Hamle: " + STR$(moves_count)
    PRINT
    PRINT "â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”"
    
    FOR i = 0 TO 3
        PRINT "â”‚"
        FOR j = 0 TO 3
            IF board(i)(j) = 0 THEN
                PRINT "     "
            ELSE
                DIM num_str AS STRING
                num_str = STR$(board(i)(j))
                DIM padding AS INTEGER
                padding = (5 - LEN(num_str)) / 2
                PRINT STRING$(padding, " ") + num_str + STRING$(5 - LEN(num_str) - padding, " ")
            END IF
            
            IF j < 3 THEN PRINT "â”‚"
        NEXT j
        PRINT "â”‚"
        
        IF i < 3 THEN
            PRINT "â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤"
        END IF
    NEXT i
    
    PRINT "â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜"
    PRINT
END SUB

DEF SUB show_controls()
    PRINT "KONTROLLER:"
    PRINT "ğŸ”¼ W/YukarÄ± - YukarÄ± hareket"
    PRINT "ğŸ”½ S/AÅŸaÄŸÄ± - AÅŸaÄŸÄ± hareket"  
    PRINT "â—€ï¸ A/Sol - Sol hareket"
    PRINT "â–¶ï¸ D/SaÄŸ - SaÄŸ hareket"
    PRINT "Q - Ã‡Ä±kÄ±ÅŸ"
    PRINT "R - Yeni oyun"
    PRINT "H - YardÄ±m"
    PRINT
END SUB

DEF SUB play_2048()
    WHILE NOT game_over
        show_board()
        
        IF game_won AND NOT has_move() THEN
            PRINT "ğŸ† TEBRÄ°KLER! 2048'e ulaÅŸtÄ±nÄ±z ve oyunu kazandÄ±nÄ±z!"
            PRINT "Devam etmek iÃ§in herhangi bir tuÅŸa basÄ±n veya Q ile Ã§Ä±kÄ±n."
        END IF
        
        IF NOT has_move() AND NOT game_won THEN
            PRINT "ğŸ’€ GAME OVER! Daha fazla hamle yapÄ±lamÄ±yor."
            game_over = True
            EXIT SUB
        END IF
        
        show_controls()
        
        REM Yeni klavye giriÅŸi sistemi kullan
        PRINT "Hareket iÃ§in tuÅŸlara basÄ±n (WASD veya Ok tuÅŸlarÄ±)..."
        DIM move AS STRING
        move = GETKEY("W,A,S,D,Q,R,H,<YUKARIOK>,<ASAGIOK>,<SOLOK>,<SAGOK>,<ESC>")
        
        REM move deÄŸerini bÃ¼yÃ¼k harfe Ã§evir
        IF move = "<YUKARIOK>" THEN
            move = "W"
        ELSEIF move = "<ASAGIOK>" THEN
            move = "S"
        ELSEIF move = "<SOLOK>" THEN
            move = "A"
        ELSEIF move = "<SAGOK>" THEN
            move = "D"
        ELSEIF move = "<ESC>" THEN
            move = "Q"
        ELSE
            move = UPPER$(move)
        END IF
        
        SELECT CASE move
            CASE "W", "YUKARI", "UP"
                IF move_up() THEN
                    call add_random_tile()
                    moves_count = moves_count + 1
                END IF
                
            CASE "S", "AÅAÄI", "DOWN"
                IF move_down() THEN
                    call add_random_tile()
                    moves_count = moves_count + 1
                END IF
                
            CASE "A", "SOL", "LEFT"
                IF move_left() THEN
                    call add_random_tile()
                    moves_count = moves_count + 1
                END IF
                
            CASE "D", "SAÄ", "RIGHT"
                IF move_right() THEN
                    call add_random_tile()
                    moves_count = moves_count + 1
                END IF
                
            CASE "Q", "Ã‡IK", "EXIT"
                PRINT "Oyun sonlandÄ±rÄ±lÄ±yor..."
                game_over = True
                
            CASE "R", "YENÄ°", "NEW"
                INPUT "Yeni oyun baÅŸlatÄ±lsÄ±n mÄ±? (E/H): ", confirm
                IF UPPER$(confirm) = "E" THEN
                    call initialize_2048()
                END IF
                
            CASE "H", "YARDIM", "HELP"
                call show_help()
                
            CASE ELSE
                PRINT "âŒ GeÃ§ersiz hareket! W/A/S/D tuÅŸlarÄ±nÄ± kullanÄ±n."
        END SELECT
        
        REM Kazanma kontrolÃ¼
        IF NOT game_won AND has_2048() THEN
            game_won = True
            IF score > best_score THEN
                best_score = score
            END IF
            show_board()
            PRINT "ğŸ‰ KAZANDINIZ! 2048 karesi oluÅŸturdunuz!"
            PRINT "Devam etmek iÃ§in herhangi bir hamle yapabilirsiniz."
        END IF
        
        PRINT
    WEND
END SUB

DEF FUNCTION move_left() AS BOOLEAN
    DIM moved AS BOOLEAN
    moved = False
    
    FOR i = 0 TO 3
        DIM row AS ARRAY
        row = []
        
        REM SÄ±fÄ±r olmayan deÄŸerleri al
        FOR j = 0 TO 3
            IF board(i)(j) <> 0 THEN
                INSERT(row, board(i)(j))
            END IF
        NEXT j
        
        REM BirleÅŸtirme yap
        DIM merged_row AS ARRAY
        merged_row = []
        DIM j AS INTEGER
        j = 0
        
        WHILE j < LEN(row)
            IF j < LEN(row) - 1 AND row(j) = row(j + 1) THEN
                REM Ä°ki aynÄ± sayÄ±yÄ± birleÅŸtir
                DIM merged_value AS INTEGER
                merged_value = row(j) * 2
                INSERT(merged_row, merged_value)
                score = score + merged_value
                j = j + 2  ' Ä°ki deÄŸeri atlasÄ±n
            ELSE
                INSERT(merged_row, row(j))
                j = j + 1
            END IF
        WEND
        
        REM SatÄ±rÄ± 4 elemana tamamla (saÄŸdan sÄ±fÄ±rlarla)
        WHILE LEN(merged_row) < 4
            INSERT(merged_row, 0)
        WEND
        
        REM DeÄŸiÅŸiklik olup olmadÄ±ÄŸÄ±nÄ± kontrol et
        FOR j = 0 TO 3
            IF board(i)(j) <> merged_row(j) THEN
                moved = True
            END IF
            board(i)(j) = merged_row(j)
        NEXT j
    NEXT i
    
    RETURN moved
END FUNCTION

DEF FUNCTION move_right() AS BOOLEAN
    DIM moved AS BOOLEAN
    moved = False
    
    FOR i = 0 TO 3
        DIM row AS ARRAY
        row = []
        
        REM SÄ±fÄ±r olmayan deÄŸerleri ters sÄ±rada al
        FOR j = 3 TO 0 STEP -1
            IF board(i)(j) <> 0 THEN
                INSERT(row, board(i)(j))
            END IF
        NEXT j
        
        REM BirleÅŸtirme yap
        DIM merged_row AS ARRAY
        merged_row = []
        DIM j AS INTEGER
        j = 0
        
        WHILE j < LEN(row)
            IF j < LEN(row) - 1 AND row(j) = row(j + 1) THEN
                DIM merged_value AS INTEGER
                merged_value = row(j) * 2
                INSERT(merged_row, merged_value)
                score = score + merged_value
                j = j + 2
            ELSE
                INSERT(merged_row, row(j))
                j = j + 1
            END IF
        WEND
        
        REM SatÄ±rÄ± 4 elemana tamamla
        WHILE LEN(merged_row) < 4
            INSERT(merged_row, 0)
        WEND
        
        REM Ters sÄ±rada geri yerleÅŸtir
        FOR j = 0 TO 3
            DIM new_value AS INTEGER
            new_value = merged_row(3 - j)
            IF board(i)(j) <> new_value THEN
                moved = True
            END IF
            board(i)(j) = new_value
        NEXT j
    NEXT i
    
    RETURN moved
END FUNCTION

DEF FUNCTION move_up() AS BOOLEAN
    DIM moved AS BOOLEAN
    moved = False
    
    FOR j = 0 TO 3
        DIM col AS ARRAY
        col = []
        
        REM SÃ¼tundaki sÄ±fÄ±r olmayan deÄŸerleri al
        FOR i = 0 TO 3
            IF board(i)(j) <> 0 THEN
                INSERT(col, board(i)(j))
            END IF
        NEXT i
        
        REM BirleÅŸtirme yap
        DIM merged_col AS ARRAY
        merged_col = []
        DIM i AS INTEGER
        i = 0
        
        WHILE i < LEN(col)
            IF i < LEN(col) - 1 AND col(i) = col(i + 1) THEN
                DIM merged_value AS INTEGER
                merged_value = col(i) * 2
                INSERT(merged_col, merged_value)
                score = score + merged_value
                i = i + 2
            ELSE
                INSERT(merged_col, col(i))
                i = i + 1
            END IF
        WEND
        
        REM SÃ¼tunu 4 elemana tamamla
        WHILE LEN(merged_col) < 4
            INSERT(merged_col, 0)
        WEND
        
        REM DeÄŸiÅŸiklikleri uygula
        FOR i = 0 TO 3
            IF board(i)(j) <> merged_col(i) THEN
                moved = True
            END IF
            board(i)(j) = merged_col(i)
        NEXT i
    NEXT j
    
    RETURN moved
END FUNCTION

DEF FUNCTION move_down() AS BOOLEAN
    DIM moved AS BOOLEAN
    moved = False
    
    FOR j = 0 TO 3
        DIM col AS ARRAY
        col = []
        
        REM SÃ¼tundaki sÄ±fÄ±r olmayan deÄŸerleri ters sÄ±rada al
        FOR i = 3 TO 0 STEP -1
            IF board(i)(j) <> 0 THEN
                INSERT(col, board(i)(j))
            END IF
        NEXT i
        
        REM BirleÅŸtirme yap
        DIM merged_col AS ARRAY
        merged_col = []
        DIM i AS INTEGER
        i = 0
        
        WHILE i < LEN(col)
            IF i < LEN(col) - 1 AND col(i) = col(i + 1) THEN
                DIM merged_value AS INTEGER
                merged_value = col(i) * 2
                INSERT(merged_col, merged_value)
                score = score + merged_value
                i = i + 2
            ELSE
                INSERT(merged_col, col(i))
                i = i + 1
            END IF
        WEND
        
        REM SÃ¼tunu 4 elemana tamamla
        WHILE LEN(merged_col) < 4
            INSERT(merged_col, 0)
        WEND
        
        REM Ters sÄ±rada geri yerleÅŸtir
        FOR i = 0 TO 3
            DIM new_value AS INTEGER
            new_value = merged_col(3 - i)
            IF board(i)(j) <> new_value THEN
                moved = True
            END IF
            board(i)(j) = new_value
        NEXT i
    NEXT j
    
    RETURN moved
END FUNCTION

DEF FUNCTION has_move() AS BOOLEAN
    REM BoÅŸ hÃ¼cre var mÄ±?
    FOR i = 0 TO 3
        FOR j = 0 TO 3
            IF board(i)(j) = 0 THEN
                RETURN True
            END IF
        NEXT j
    NEXT i
    
    REM BirleÅŸtirilebilir komÅŸu var mÄ±?
    FOR i = 0 TO 3
        FOR j = 0 TO 3
            DIM current AS INTEGER
            current = board(i)(j)
            
            REM SaÄŸdaki komÅŸu
            IF j < 3 AND board(i)(j + 1) = current THEN
                RETURN True
            END IF
            
            REM AltÄ±ndaki komÅŸu
            IF i < 3 AND board(i + 1)(j) = current THEN
                RETURN True
            END IF
        NEXT j
    NEXT i
    
    RETURN False
END FUNCTION

DEF FUNCTION has_2048() AS BOOLEAN
    FOR i = 0 TO 3
        FOR j = 0 TO 3
            IF board(i)(j) = 2048 THEN
                RETURN True
            END IF
        NEXT j
    NEXT i
    RETURN False
END FUNCTION

DEF SUB show_help()
    PRINT
    PRINT "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 2048 OYUN KURALLARI â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    PRINT "ğŸ¯ HEDEF:"
    PRINT "   KarolarÄ± hareket ettirip birleÅŸtirerek 2048'e ulaÅŸÄ±n!"
    PRINT
    PRINT "ğŸ® NASIL OYNANIR:"
    PRINT "   â€¢ W/A/S/D tuÅŸlarÄ±yla karolarÄ± hareket ettirin"
    PRINT "   â€¢ AynÄ± sayÄ±lÄ± karolar Ã§arpÄ±ÅŸtÄ±ÄŸÄ±nda birleÅŸir"
    PRINT "   â€¢ Her hamlede yeni bir karo (2 veya 4) eklenir"
    PRINT "   â€¢ Tahta dolduÄŸunda ve hamle kalmadÄ±ÄŸÄ±nda oyun biter"
    PRINT
    PRINT "ğŸ† PUANLAMA:"
    PRINT "   â€¢ Her birleÅŸtirmede birleÅŸen sayÄ± kadar puan alÄ±rsÄ±nÄ±z"
    PRINT "   â€¢ Daha bÃ¼yÃ¼k sayÄ±larÄ± birleÅŸtirin = Daha yÃ¼ksek puan"
    PRINT
    PRINT "ğŸ’¡ STRATEJÄ° Ä°PUÃ‡LARI:"
    PRINT "   â€¢ En bÃ¼yÃ¼k karolarÄ±nÄ±zÄ± bir kÃ¶ÅŸede toplayÄ±n"
    PRINT "   â€¢ Bir yÃ¶ne fazla odaklanmayÄ±n, dengeli oyun oynayÄ±n"
    PRINT "   â€¢ Ä°leriye dÃ¶nÃ¼k planlama yapÄ±n"
    PRINT "   â€¢ Acele etmeyin, her hamleyi dÃ¼ÅŸÃ¼nÃ¼n"
    PRINT
    PRINT "ğŸ“Š BAÅARI SEVÄ°YELERÄ°:"
    PRINT "   128  - BaÅŸlangÄ±Ã§ âœ¨"
    PRINT "   256  - Ä°yi ğŸ‘" 
    PRINT "   512  - Harika ğŸ”¥"
    PRINT "   1024 - MÃ¼kemmel ğŸ’"
    PRINT "   2048 - Efsane! ğŸ†"
    PRINT "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    PRINT
END SUB

DEF SUB show_final_stats()
    PRINT
    PRINT "â•â•â• FÄ°NAL Ä°STATÄ°STÄ°KLERÄ° â•â•â•"
    PRINT "Final Skor: " + STR$(score)
    PRINT "En Ä°yi Skor: " + STR$(best_score)
    PRINT "Toplam Hamle: " + STR$(moves_count)
    
    REM En yÃ¼ksek karoyu bul
    DIM max_tile AS INTEGER
    max_tile = 0
    FOR i = 0 TO 3
        FOR j = 0 TO 3
            IF board(i)(j) > max_tile THEN
                max_tile = board(i)(j)
            END IF
        NEXT j
    NEXT i
    
    PRINT "En YÃ¼ksek Karo: " + STR$(max_tile)
    
    IF game_won THEN
        PRINT "Durum: ğŸ† KAZANDINIZ!"
    ELSE
        PRINT "Durum: ğŸ’€ Game Over"
    END IF
    
    IF moves_count > 0 THEN
        DIM avg_score AS DOUBLE
        avg_score = score / moves_count
        PRINT "Hamle BaÅŸÄ±na Ortalama Puan: " + STR$(ROUND(avg_score, 1))
    END IF
    
    PRINT
    PRINT "BAÅARI DEÄERLENDÄ°RMESÄ°:"
    SELECT CASE max_tile
        CASE 128 TO 255
            PRINT "â­ Ä°yi baÅŸlangÄ±Ã§!"
        CASE 256 TO 511
            PRINT "â­â­ GÃ¼zel performans!"
        CASE 512 TO 1023
            PRINT "â­â­â­ Harika oyun!"
        CASE 1024 TO 2047
            PRINT "â­â­â­â­ MÃ¼kemmel sonuÃ§!"
        CASE 2048
            PRINT "â­â­â­â­â­ EFSANEVÄ°!"
        CASE ELSE
            PRINT "ğŸ Ä°yi deneme, tekrar deneyin!"
    END SELECT
END SUB

DEF SUB show_main_menu()
    PRINT "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 2048 OYUNU â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    PRINT "1. Yeni Oyun BaÅŸlat"
    PRINT "2. Oyun KurallarÄ±nÄ± GÃ¶ster"
    PRINT "3. En Ä°yi Skorlar"
    PRINT "4. Ã‡Ä±kÄ±ÅŸ"
    PRINT "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
END SUB

REM Ana oyun dÃ¶ngÃ¼sÃ¼
DIM main_running AS BOOLEAN
main_running = True

WHILE main_running
    show_main_menu()
    
    DIM menu_choice AS INTEGER
    INPUT "SeÃ§iminiz: ", menu_choice
    
    SELECT CASE menu_choice
        CASE 1
            call initialize_2048()
            call play_2048()
            call show_final_stats()
            
        CASE 2
            call show_help()
            
        CASE 3
            PRINT
            PRINT "â•â•â• EN Ä°YÄ° SKORLAR â•â•â•"
            PRINT "En yÃ¼ksek skor: " + STR$(best_score)
            PRINT "Bu seansÄ±n skoru: " + STR$(score)
            PRINT
            
        CASE 4
            main_running = False
            PRINT "2048 oyunu kapatÄ±lÄ±yor... GÃ¼le gÃ¼le!"
            
        CASE ELSE
            PRINT "GeÃ§ersiz seÃ§im!"
    END SELECT
    
    IF main_running THEN
        PRINT
        INPUT "Ana menÃ¼ye dÃ¶nmek iÃ§in Enter tuÅŸuna basÄ±n...", dummy
        PRINT
    END IF
WEND
